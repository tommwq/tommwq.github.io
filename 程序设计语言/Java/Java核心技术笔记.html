<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-09-23 周一 21:12 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgaf7a399">java程序设计概述</a></li>
<li><a href="#org3e3c50e">java程序设计环境</a></li>
<li><a href="#org5d380e2">java的基本程序设计结构</a>
<ul>
<li><a href="#org4511347">HelloWorld</a></li>
<li><a href="#orgee0594a">类型</a></li>
<li><a href="#orgc7a4143">变量</a></li>
<li><a href="#org7748a54">final</a></li>
<li><a href="#orgc9331e3">数学运算</a></li>
<li><a href="#org2aea821">枚举类型</a></li>
<li><a href="#org2ab09e7">字符串</a></li>
<li><a href="#org5857dd5">输入输出</a></li>
<li><a href="#org3afcf5f">控制流程</a></li>
<li><a href="#orgf7bdac2">分支</a></li>
<li><a href="#orgc7907be">循环</a></li>
<li><a href="#org67e6cbc">高精度数值</a></li>
<li><a href="#orgcdd8b05">数组</a></li>
</ul>
</li>
<li><a href="#org66ac98c">对象和类</a>
<ul>
<li><a href="#orgf2bbdb3">包</a></li>
</ul>
</li>
<li><a href="#org8b4cad5">继承</a>
<ul>
<li><a href="#org0815adf">Object</a></li>
<li><a href="#orgc3a3078">可变参数</a></li>
<li><a href="#orgbc1eff6">枚举类</a></li>
<li><a href="#org883232e">反射</a></li>
</ul>
</li>
<li><a href="#org9ab2b75">接口和内部类</a>
<ul>
<li><a href="#org27fc015">接口</a></li>
<li><a href="#org8c73573">克隆</a></li>
<li><a href="#orgec61261">内部类</a></li>
</ul>
</li>
<li><a href="#org99e0f38">代理</a></li>
<li><a href="#org7df3c08">部署应用程序</a></li>
<li><a href="#org32132b1">异常、断言、日志和调试</a>
<ul>
<li><a href="#org049c23f">异常</a></li>
<li><a href="#org98785bf">断言</a></li>
<li><a href="#org9933ba2">日志</a></li>
</ul>
</li>
<li><a href="#orgeb9d718">泛型程序设计</a></li>
<li><a href="#org6400cb1">集合</a></li>
<li><a href="#org77764ab">多线程</a></li>
<li><a href="#orgd30eaa7">流与文件</a>
<ul>
<li><a href="#orgf716a71">字符集</a></li>
<li><a href="#org10f155c">二进制输入输出</a></li>
<li><a href="#org1ce0be0">对象流</a></li>
<li><a href="#orgf24d1f7">文件管理</a></li>
<li><a href="#org3099564">nio</a></li>
<li><a href="#orge27c836">正则表达式</a></li>
</ul>
</li>
<li><a href="#org98bae0e">XML</a>
<ul>
<li><a href="#org9f9838f">DOM</a></li>
<li><a href="#org41d58e1">验证XML</a></li>
<li><a href="#org4015196">SAX</a></li>
</ul>
</li>
<li><a href="#orge800209">网络</a></li>
<li><a href="#orgfa440c9">数据库编程</a></li>
<li><a href="#org8b19878">国际化</a>
<ul>
<li><a href="#org283d0da">字符排序</a></li>
</ul>
</li>
<li><a href="#orgcaa29c0">安全</a>
<ul>
<li><a href="#org3c820ab">加密</a></li>
</ul>
</li>
<li><a href="#orga311721">分布式对象</a></li>
<li><a href="#org20b6274">脚本、编译与注解处理</a>
<ul>
<li><a href="#orgbd02c68">注解</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
Java核心技术笔记
</p>


<div id="outline-container-orgaf7a399" class="outline-2">
<h2 id="orgaf7a399">java程序设计概述</h2>
</div>

<div id="outline-container-org3e3c50e" class="outline-2">
<h2 id="org3e3c50e">java程序设计环境</h2>
</div>

<div id="outline-container-org5d380e2" class="outline-2">
<h2 id="org5d380e2">java的基本程序设计结构</h2>
<div class="outline-text-2" id="text-org5d380e2">
</div>
<div id="outline-container-org4511347" class="outline-3">
<h3 id="org4511347">HelloWorld</h3>
<div class="outline-text-3" id="text-org4511347">
<p>
下面是一个最简单的Java程序：
</p>

<pre class="example">
public class FirstSample {
    public static void main(String[] args) {
        System.out.println("We will not use 'Hello, World!'");
    }
}
</pre>

<p>
这里的public是访问修饰符（access modifier），控制了程序其他部分对这段代码的访问级别。
</p>
</div>
</div>

<div id="outline-container-orgee0594a" class="outline-3">
<h3 id="orgee0594a">类型</h3>
<div class="outline-text-3" id="text-orgee0594a">
<p>
Java是强类型语言。Java具有8种基本类型（primitive type），分别是：
</p>

<p>
整形
int      4字节
short    2字节
long     8字节
byte     1字节
浮点型
float    4字节
double   8字节
字符型
char     2字节
布尔型
boolean
</p>

<p>
在选择类型时需要注意，对舍入要求严格的场景，不能使用浮点数，需要使用BigDecimal。对误差要求严格的场景，不能将浮点数直接进行相等比较。对NaN也不能用等号比较，要用Double.isNaN()判断。不同类型之间可以相互转化，但必须注意，这种转化可能损失数据精度。浮点型转换为整形会截断小数部分。
</p>
</div>
</div>

<div id="outline-container-orgc7a4143" class="outline-3">
<h3 id="orgc7a4143">变量</h3>
<div class="outline-text-3" id="text-orgc7a4143">
<p>
每个变量都具有自己的类型：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">double</span> <span style="color: #a0522d;">x</span> = 1.0;
</pre>
</div>
</div>
</div>

<div id="outline-container-org7748a54" class="outline-3">
<h3 id="org7748a54">final</h3>
<div class="outline-text-3" id="text-org7748a54">
<p>
final表示这个对象只能被赋值一次。习惯上这样的对象采用大写字母命名：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">final</span> <span style="color: #228b22;">double</span> <span style="color: #a0522d;">CM_PER_INCH</span> = 2.54;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc9331e3" class="outline-3">
<h3 id="orgc9331e3">数学运算</h3>
<div class="outline-text-3" id="text-orgc9331e3">
<p>
java.lang.Math类提供了常用的数学函数和常量：
</p>


<blockquote>
<p>
Math.sin
Math.cos
Math.tan
Math.exp
Math.log
Math.log10
Math.round
Math.PI
Math.E
</p>
</blockquote>
</div>
</div>


<div id="outline-container-org2aea821" class="outline-3">
<h3 id="org2aea821">枚举类型</h3>
<div class="outline-text-3" id="text-org2aea821">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">enum</span> <span style="color: #228b22;">Size</span> { <span style="color: #a0522d;">SMALL</span>, <span style="color: #a0522d;">MEDIUM</span>, <span style="color: #a0522d;">LARGE</span>, <span style="color: #a0522d;">EXTRA_LARGE</span> };
<span style="color: #228b22;">Size</span> <span style="color: #a0522d;">s</span> = <span style="color: #008b8b;">Size</span>.MEDIUM;
</pre>
</div>
</div>
</div>

<div id="outline-container-org2ab09e7" class="outline-3">
<h3 id="org2ab09e7">字符串</h3>
<div class="outline-text-3" id="text-org2ab09e7">
<p>
Java没有内置的字符串类型，而是通过标准库提供了java.lang.String类。
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">String</span> <span style="color: #a0522d;">greeting</span> = <span style="color: #8b2252;">"Hello"</span>;
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">sub</span> = greeting.substring(0, 3); <span style="color: #b22222;">// </span><span style="color: #b22222;">Hel</span>
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">message</span> = greeting + <span style="color: #8b2252;">" World"</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">Hello World</span>
</pre>
</div>

<p>
在Java中使用字符串，有两个地方需要特别注意。首先，字符串都是不可变的。其次，字符串相等必须使用String.equals()方法或equalsIgnoreCase()方法。
</p>

<p>
下面是一些java.lang.String的常用方法：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">char</span> <span style="color: #0000ff;">charAt</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">codePointAt</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">compareTo</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">other</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">endsWith</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">suffix</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">equals</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">other</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">equalsIgnoreCase</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">other</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">indexOf</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">str</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">indexOf</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">str</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">fromIndex</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">indexOf</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">cp</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">indexOf</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">cp</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">fromIndex</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">lastIndexOf</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">str</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">lastIndexOf</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">str</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">fromIndex</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">lastIndexOf</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">cp</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">lastIndexOf</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">cp</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">fromIndex</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">length</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">replace</span>(<span style="color: #228b22;">CharSequence</span> <span style="color: #a0522d;">old</span>, <span style="color: #228b22;">CharSequence</span> <span style="color: #a0522d;">replacement</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">startsWith</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">prefix</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">substring</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">begin</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">substring</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">begin</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">end</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">toLowerCase</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">toUpperCase</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">trim</span>();
</pre>
</div>

<p>
字符串是不可变的，每次拼接都会返回一个新对象。为了避免构造过多的String对象，Java提供了java.lang.StringBuilder负责大量字符串的拼接：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">StringBuilder</span> <span style="color: #a0522d;">builder</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">StringBuilder</span>();
builder.append(<span style="color: #8b2252;">"Hello"</span>);
builder.append(<span style="color: #8b2252;">"World"</span>);
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">result</span> = builder.toString();
</pre>
</div>

<p>
StringBuilder的常用方法有：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">int</span> <span style="color: #0000ff;">length</span>();
<span style="color: #228b22;">StringBuilder</span> <span style="color: #0000ff;">append</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">part</span>);
<span style="color: #228b22;">StringBuilder</span> <span style="color: #0000ff;">insert</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">offset</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">part</span>);
<span style="color: #228b22;">StringBuilder</span> <span style="color: #0000ff;">delete</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">begin</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">end</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">toString</span>();
</pre>
</div>
</div>
</div>


<div id="outline-container-org5857dd5" class="outline-3">
<h3 id="org5857dd5">输入输出</h3>
<div class="outline-text-3" id="text-org5857dd5">
<p>
Java提供了System.in和System.out对象，对标准输入和标准输出进行封装。为了简化从标准输入中读取数据，java提供了java.util.Scanner类：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">Scanner</span> <span style="color: #a0522d;">scanner</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Scanner</span>(System.in);
System.out.print(<span style="color: #8b2252;">"What is your name? "</span>);
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span> = scanner.nextLine();
System.out.print(<span style="color: #8b2252;">"How old are you? "</span>);
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">age</span> = scanner.nextInt();
</pre>
</div>

<p>
Scanner的常用方法有：
</p>
<div class="org-src-container">
<pre class="src src-java">Scanner(<span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">nextLine</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">next</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">nextInt</span>();
<span style="color: #228b22;">double</span> <span style="color: #0000ff;">nextDouble</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">hasNext</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">hasNextInt</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">hasNextDouble</span>();
</pre>
</div>

<p>
Scanner也支持从文件输入数据：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">Scanner</span> <span style="color: #a0522d;">scanner</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Scanner</span>(Paths.get(<span style="color: #8b2252;">"myfile.txt"</span>));
</pre>
</div>

<p>
或者从字符串输入：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">Scanner</span> <span style="color: #a0522d;">scanner</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Scanner</span>(<span style="color: #8b2252;">"hello world"</span>);
scanner.next(); <span style="color: #b22222;">// </span><span style="color: #b22222;">hello</span>
scanner.next(); <span style="color: #b22222;">// </span><span style="color: #b22222;">world</span>
</pre>
</div>

<p>
System.in的输入是可见的。这一点对于密码来说，增加了不安全因素。因此Java提供了java.io.Console类：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">Console</span> <span style="color: #a0522d;">cons</span> = System.console();
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">username</span> = cons.readLine(<span style="color: #8b2252;">"User name: "</span>);
<span style="color: #228b22;">char</span>[] <span style="color: #a0522d;">password</span> = cons.readPassword(<span style="color: #8b2252;">"Password: "</span>);
</pre>
</div>

<p>
为了安全起见，密码应当保存在字符数组中，并在使用后立即无用数据覆盖。
</p>

<p>
java支持格式化输入，和C类似：
</p>
<div class="org-src-container">
<pre class="src src-java">System.out.printf(<span style="color: #8b2252;">"Hello, %s."</span>, <span style="color: #228b22;">name</span>);
</pre>
</div>

<p>
printf支持的转换符有
</p>

<p>
d 十进制整数              
x 十六进制整数
o 八进制整数
f 浮点数
e 指数浮点数
g 通用浮点数
a 十六进制浮点数
s 字符串
c 字符
b 布尔值
h 散列码
tx 日期
% 百分号
n 换行符
</p>

<p>
如果要输出到文件，可以使用PrintWriter：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">PrintWriter</span> <span style="color: #a0522d;">writer</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">PrintWriter</span>(<span style="color: #8b2252;">"myfile.txt"</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-org3afcf5f" class="outline-3">
<h3 id="org3afcf5f">控制流程</h3>
</div>

<div id="outline-container-orgf7bdac2" class="outline-3">
<h3 id="orgf7bdac2">分支</h3>
<div class="outline-text-3" id="text-orgf7bdac2">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">if</span> (condition) {
    statement1;
} <span style="color: #a020f0;">else</span> {
    statement2;
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">switch</span> (value) {
    <span style="color: #a020f0;">case</span> 1:  
        <span style="color: #b22222;">// </span><span style="color: #b22222;">...</span>
        <span style="color: #a020f0;">break</span>;
    <span style="color: #a020f0;">default</span>:
        <span style="color: #b22222;">// </span><span style="color: #b22222;">...</span>
        <span style="color: #a020f0;">break</span>;
}
</pre>
</div>

<p>
switch支持整形、枚举型和字符串字面值。
</p>
</div>
</div>

<div id="outline-container-orgc7907be" class="outline-3">
<h3 id="orgc7907be">循环</h3>
<div class="outline-text-3" id="text-orgc7907be">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">while</span> (condition) {
    statement;
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">do</span> {
    statement;
} <span style="color: #a020f0;">while</span> (condition);
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">for</span> (initialize; condition; update) {
    statement;
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">for</span> (variable: collection) {
    statement;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org67e6cbc" class="outline-3">
<h3 id="org67e6cbc">高精度数值</h3>
<div class="outline-text-3" id="text-org67e6cbc">
<p>
java.math包提供了BigInteger和BigDecimal来支持高精度整数和浮点数运算：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #b22222;">// </span><span style="color: #b22222;">BigInteger</span>
<span style="color: #228b22;">BigInteger</span> <span style="color: #0000ff;">add</span>(<span style="color: #228b22;">BigInteger</span> <span style="color: #a0522d;">other</span>);
<span style="color: #228b22;">BigInteger</span> <span style="color: #0000ff;">subtract</span>(<span style="color: #228b22;">BigInteger</span> <span style="color: #a0522d;">other</span>);
<span style="color: #228b22;">BigInteger</span> <span style="color: #0000ff;">multiply</span>(<span style="color: #228b22;">BigInteger</span> <span style="color: #a0522d;">other</span>);
<span style="color: #228b22;">BigInteger</span> <span style="color: #0000ff;">divide</span>(<span style="color: #228b22;">BigInteger</span> <span style="color: #a0522d;">other</span>);
<span style="color: #228b22;">BigInteger</span> <span style="color: #0000ff;">mod</span>(<span style="color: #228b22;">BigInteger</span> <span style="color: #a0522d;">other</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">compareTo</span>(<span style="color: #228b22;">BigInteger</span> <span style="color: #a0522d;">other</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">BigInteger</span> <span style="color: #0000ff;">valueOf</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">x</span>);

<span style="color: #b22222;">// </span><span style="color: #b22222;">BigDecimal</span>
<span style="color: #228b22;">BigDecimal</span> <span style="color: #0000ff;">add</span>(<span style="color: #228b22;">BigDecimal</span> <span style="color: #a0522d;">other</span>);
<span style="color: #228b22;">BigDecimal</span> <span style="color: #0000ff;">substract</span>(<span style="color: #228b22;">BigDecimal</span> <span style="color: #a0522d;">other</span>);
<span style="color: #228b22;">BigDecimal</span> <span style="color: #0000ff;">multiply</span>(<span style="color: #228b22;">BigDecimal</span> <span style="color: #a0522d;">other</span>);
<span style="color: #228b22;">BigDecimal</span> <span style="color: #0000ff;">divide</span>(<span style="color: #228b22;">BigDecimal</span> <span style="color: #a0522d;">other</span>, <span style="color: #228b22;">RoundingMode</span> <span style="color: #a0522d;">mode</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">compareTo</span>(<span style="color: #228b22;">BigDecimal</span> <span style="color: #a0522d;">other</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">BigDecimal</span> <span style="color: #0000ff;">valueOf</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">x</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">BigDecimal</span> <span style="color: #0000ff;">valueOf</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">scale</span>);  <span style="color: #b22222;">// </span><span style="color: #b22222;">x/10^scale</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orgcdd8b05" class="outline-3">
<h3 id="orgcdd8b05">数组</h3>
<div class="outline-text-3" id="text-orgcdd8b05">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">int</span>[] <span style="color: #a0522d;">numbers</span> = {1, 2, 3};
<span style="color: #228b22;">int</span>[] <span style="color: #a0522d;">copy</span> = Arrays.copyOf(numbers, numbers.length);
Arrays.sort(copy);
</pre>
</div>

<p>
java.util.Arrays的方法有：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">static</span> <span style="color: #228b22;">String</span> <span style="color: #0000ff;">toString</span>(<span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">a</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">primitive_type</span> <span style="color: #0000ff;">copyOf</span>(<span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">length</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">primitive_type</span> <span style="color: #0000ff;">copyOf</span>(<span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">begin</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">end</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">sort</span>(<span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">a</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">binarySearch</span>(<span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">primitive_type</span> <span style="color: #a0522d;">t</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">binarySearch</span>(<span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">begin</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">end</span>, <span style="color: #228b22;">primitive_type</span> <span style="color: #a0522d;">t</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">fill</span>(<span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">primitive_type</span> <span style="color: #a0522d;">v</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">equals</span>(<span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">b</span>);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org66ac98c" class="outline-2">
<h2 id="org66ac98c">对象和类</h2>
<div class="outline-text-2" id="text-org66ac98c">
<p>
类之间最常见的关系有依赖（uses-a）、聚合（has-a）和继承（is-a）。
</p>

<p>
类的构造函数可以通过this进行委托：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">User</span> {
    <span style="color: #a020f0;">private</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">id</span>;
    <span style="color: #a020f0;">private</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>;

    <span style="color: #a020f0;">public</span> <span style="color: #0000ff;">User</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">id</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>) {
        <span style="color: #a020f0;">this</span>.id = id;
        <span style="color: #a020f0;">this</span>.name = name;
    }

    <span style="color: #a020f0;">public</span> <span style="color: #0000ff;">User</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">id</span>) {
        <span style="color: #a020f0;">this</span>(id, <span style="color: #8b2252;">"user #"</span> + id);
    }
}
</pre>
</div>

<p>
在Java里，不建议使用Date类表示日期和时间，应当使用GregorianCalendar类：
</p>
<div class="org-src-container">
<pre class="src src-java">GregorianCalendar()
GregorianCalendar(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">year</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">month</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">day</span>)
GregorianCalendar(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">year</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">month</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">day</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">hour</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">minutes</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">seconds</span>)
<span style="color: #228b22;">int</span> get(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">field</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">Calendar.YEAR ...</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">set</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">field</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">value</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">set</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">year</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">month</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">day</span>)
<span style="color: #228b22;">void</span> set(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">year</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">month</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">day</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">hour</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">minutes</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">seconds</span>)
Date getTime();
</pre>
</div>

<p>
java提供了java.text.DateFormatSymbls来显示日历使用的文字：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">String</span>[] <span style="color: #0000ff;">getShortWeekdays</span>()
String[] getShortMonths()
String[] getWeekdays()
String[] getMonths()
</pre>
</div>

<p>
封装保护了实例的不变性，任何其他对象都不能直接破坏实例的不变形。考虑到Java使用的是引用，在编写getter时要特别注意这一点。对于对象类型的域，不能直接返回：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">class</span> <span style="color: #228b22;">Employee</span> {
    <span style="color: #a020f0;">private</span> <span style="color: #228b22;">Date</span> <span style="color: #a0522d;">hireDay</span>;

    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#19981;&#22909;&#65292;hireDay&#22495;&#21487;&#33021;&#34987;&#22806;&#37096;&#20195;&#30721;&#20462;&#25913;</span>
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Date</span> <span style="color: #0000ff;">getHireDay</span>() {
        <span style="color: #a020f0;">return</span> hireDay;
    }

    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22909;&#65292;hireDay&#22495;&#19981;&#20250;&#34987;&#22806;&#37096;&#20195;&#30721;&#20462;&#25913;</span>
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Date</span> <span style="color: #0000ff;">getHireDay</span>() {
        <span style="color: #a020f0;">return</span> hireDay.clone();
    }
}
</pre>
</div>

<p>
对于任何不能保证不变性的方法，都不能声明为public或protected。
</p>

<p>
在函数调用中，Java使用的是值传递。这个值是引用。
</p>

<p>
Java提供了初始化块进行类的初始化操作：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">Employee</span> {
    <span style="color: #a020f0;">private</span> <span style="color: #228b22;">double</span> <span style="color: #a0522d;">salary</span>;

    {
        salary = 0.0;
    }
}
</pre>
</div>

<p>
初始化块也可以是静态的：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">Employee</span> {
    <span style="color: #a020f0;">private</span> <span style="color: #228b22;">double</span> <span style="color: #a0522d;">salary</span>;

    <span style="color: #a020f0;">static</span> {
        salary = 0.0;
    }
}
</pre>
</div>

<p>
在类被首次加载的时候，会按照定义的顺序执行静态初始化语句和静态初始化块。对于实例也是类似的，按照定义顺序执行初始化语句和初始化块，然后执行构造函数。没有指定初始化值的域被初始化为零值。
</p>

<p>
如果为类定义了finalize()方法，当实例被释放之前会调用finalize()。对于整个系统，可以调用Runtime.addShutdownHook()注册一个在系统关闭时调用的函数。
</p>
</div>

<div id="outline-container-orgf2bbdb3" class="outline-3">
<h3 id="orgf2bbdb3">包</h3>
<div class="outline-text-3" id="text-orgf2bbdb3">
<p>
java以包将类组织起来。在导入时要使用import语句：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">List</span>;
<span style="color: #a020f0;">import</span> <span style="color: #a020f0;">static</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.System.<span style="color: #228b22;">out</span>;
</pre>
</div>

<p>
静态导入用于导入类的静态对象和静态方法，之后使用时无须指定类名。
</p>
</div>
</div>
</div>

<div id="outline-container-org8b4cad5" class="outline-2">
<h2 id="org8b4cad5">继承</h2>
<div class="outline-text-2" id="text-org8b4cad5">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">Manager</span> <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Employee</span> {
}
</pre>
</div>

<p>
如果要避免一个类被继承，可以将它声明为final：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">final</span> <span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">CannotBeDerived</span> {
}
</pre>
</div>

<p>
在对类进行强制类型转换时，如果转换失败，会抛出ClassCaseException。更安全的做法是首先进行类型的is-a判断：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">if</span> (staff[1] <span style="color: #a020f0;">instanceof</span> Manager) {
    <span style="color: #228b22;">Manager</span> <span style="color: #a0522d;">boss</span> = (<span style="color: #228b22;">Manager</span>) staff[1];
}
</pre>
</div>
<p>
instanceof对null是安全的。
</p>

<p>
除了private和public，java还提供了protected访问修饰符。protected对象可以被派生类及同一个包内的对象访问。如果没有使用任意一个访问修饰符，对象的访问范围是当前的包。
</p>
</div>

<div id="outline-container-org0815adf" class="outline-3">
<h3 id="org0815adf">Object</h3>
<div class="outline-text-3" id="text-org0815adf">
<p>
在Java中，除了基础类型和Object自身外，其他类型都是Object的派生类。Object类有两个比较重要的方法：equals和hashCode。equals用来判断两个对象是否相等。这个方法可以重载，但必须满足：
</p>

<ol class="org-ol">
<li>反身性。对任意非空对象x，x.equals(x)为真。</li>
<li>对称性。对任意对象x和y，如果x.equals(y)为真，必有y.equals(x)为真。</li>
<li>传递性。对任意对象x、y和z，如果x.equals(y)和y.equals(z)都为真，则x.equals(z)为真。</li>
<li>一致性。如果x和y引用的对象没有发生变化，反复调用x.equals(y)的结果应当一致。</li>
<li>对任意非空引用x，x.equals(null)为假。</li>
</ol>

<p>
下面是一个简单的equals框架：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">equals</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">rhs</span>) {
    <span style="color: #a020f0;">if</span> (<span style="color: #a020f0;">this</span> == rhs) <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">true</span>;
    <span style="color: #a020f0;">if</span> (rhs == <span style="color: #008b8b;">null</span>) <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
    <span style="color: #a020f0;">if</span> (getClass() != rhs.getClass()) <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22914;&#26524;&#23376;&#31867;&#20855;&#26377;&#32479;&#19968;&#35821;&#35328;&#65292;&#19978;&#38754;&#19968;&#34892;&#21487;&#20197;&#26367;&#25442;&#20026;</span>
    <span style="color: #b22222;">// </span><span style="color: #b22222;">if (!(rhs instanceof ClassName)) return false;</span>
    <span style="color: #228b22;">ClassName</span> <span style="color: #a0522d;">peer</span> = (<span style="color: #228b22;">ClassName</span>) rhs;
    <span style="color: #a020f0;">return</span> field1 == peer.field1 &amp;&amp; ...;
}
</pre>
</div>

<p>
如果重载了equals方法，必须同时重载hashCode。hashCode用来返回对象的散列码。重载hashCode的唯一要求是，如果x.equals(y)为真，x和y的hashCode必须相等。为了方便重载equals和hashCode，java提供了一些辅助函数：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.Arrays
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">equals</span>(<span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">b</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">hashCode</span>(<span style="color: #228b22;">primitive_type</span>[] <span style="color: #a0522d;">a</span>);
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.Objects
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">equals</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">b</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22914;&#26524;a&#21644;b&#37117;&#26159;null&#65292;&#36820;&#22238;true&#12290;&#22914;&#26524;&#19968;&#20010;&#26159;null&#65292;&#36820;&#22238;false&#12290;&#21542;&#21017;&#36820;&#22238;a.equals(b)&#12290;</span>
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">hash</span>(<span style="color: #228b22;">Object</span>... <span style="color: #a0522d;">objects</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">hashCode</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">a</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22914;&#26524;a&#26159;null&#65292;&#36820;&#22238;0&#12290;&#21542;&#21017;&#36820;&#22238;a.hashCode()&#12290;</span>
</pre>
</div>

<p>
Object还有一个经常被重载的函数：toString()。使用加号（+）连接字符串和对象时，对象的toString()会被调用：
</p>
<div class="org-src-container">
<pre class="src src-java">System.out.println(<span style="color: #8b2252;">"hello"</span> + foo); <span style="color: #b22222;">// </span><span style="color: #b22222;">"hello" + foo.toString()</span>
</pre>
</div>
<p>
默认情况下，toString()返回对象的类名和散列码，如：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.<span style="color: #228b22;">PrintStream</span><span style="color: #a0522d;">@2f6684</span>
</pre>
</div>


<p>
java.util.ArrayList提供了线性容器：
</p>
<div class="org-src-container">
<pre class="src src-java">ArrayList&lt;<span style="color: #228b22;">T</span>&gt;();
ArrayList&lt;<span style="color: #228b22;">T</span>&gt;(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">initialCapacity</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">add</span>(<span style="color: #228b22;">T</span> <span style="color: #a0522d;">object</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">add</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">object</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">size</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">ensureCapacity</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">capacity</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">trimToSize</span>();
<span style="color: #228b22;">T</span> <span style="color: #0000ff;">get</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">set</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">object</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">remove</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">T</span>[] <span style="color: #0000ff;">toArray</span>(<span style="color: #228b22;">T</span>[] <span style="color: #a0522d;">array</span>);
</pre>
</div>

<p>
原始类型不能应用于容器中，必须使用包装器（wrapper），如Integer、Double等。包装器是不可变的。Java为容器增加了自动装箱（autoboxing）和自动拆箱特性：
</p>
<div class="org-src-container">
<pre class="src src-java">list.add(3);
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">n</span> = list.get(i);
</pre>
</div>
<p>
会自动变成
</p>
<div class="org-src-container">
<pre class="src src-java">list.add(Integer.valueOf(3));
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">n</span> = list.get(i).intValue();
</pre>
</div>
<p>
自动装箱和拆箱是编译器完成的。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Integer
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">intValue</span>();
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">String</span> <span style="color: #0000ff;">toString</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">String</span> <span style="color: #0000ff;">toString</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">radix</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">parseInt</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">parseInt</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">radix</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Integer</span> <span style="color: #0000ff;">valueOf</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Integer</span> <span style="color: #0000ff;">valueOf</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">radix</span>);
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">text</span>.NumberFormat
<span style="color: #228b22;">Number</span> <span style="color: #0000ff;">parse</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc3a3078" class="outline-3">
<h3 id="orgc3a3078">可变参数</h3>
<div class="outline-text-3" id="text-orgc3a3078">
<p>
java支持可变参数：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">Object</span>... <span style="color: #a0522d;">args</span>) {
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">o</span>: args) {
        System.out.println(o);
    }
}
</pre>
</div>
<p>
可变参数实际上会装箱成为一个T[]。
</p>
</div>
</div>

<div id="outline-container-orgbc1eff6" class="outline-3">
<h3 id="orgbc1eff6">枚举类</h3>
<div class="outline-text-3" id="text-orgbc1eff6">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">enum</span> <span style="color: #228b22;">Size</span> {<span style="color: #a0522d;">SMALL</span>, <span style="color: #a0522d;">MEDIUM</span>, <span style="color: #a0522d;">LARGE</span>, <span style="color: #a0522d;">EXTRA_LARGE</span>};
</pre>
</div>

<p>
所有枚举类都是Enum的子类：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #228b22;">Enum</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #a020f0;">static</span> Enum valueOf(<span style="color: #228b22;">Class</span> <span style="color: #a0522d;">enumClass</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">toString</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">ordinal</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">compareTo</span>(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">other</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-org883232e" class="outline-3">
<h3 id="org883232e">反射</h3>
<div class="outline-text-3" id="text-org883232e">
<p>
Java运行时为每个对象维护一个类型表示，通过方法getClass()可以得到它。通过静态方法Class.forName(String className)也可以手动获得Class对象，或者更简单的：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">Class</span> <span style="color: #a0522d;">clazz</span> = Data.<span style="color: #a020f0;">class</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#23454;&#38469;&#19978;&#26159;Class&lt;Data&gt;&#23545;&#35937;</span>
<span style="color: #228b22;">Class</span> <span style="color: #a0522d;">clazz2</span> = <span style="color: #228b22;">int</span>.<span style="color: #a020f0;">class</span>;
<span style="color: #228b22;">Class</span> <span style="color: #a0522d;">Clazz3</span> = Double[].<span style="color: #a020f0;">class</span>;
</pre>
</div>

<p>
Class对象提供了方法getName()返回名字，和newInstance()方法建立对应的对象。
</p>


<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Class
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Class</span> <span style="color: #0000ff;">forName</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">className</span>);
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">newInstance</span>();
<span style="color: #228b22;">Field</span>[] <span style="color: #0000ff;">getField</span>();
<span style="color: #228b22;">Field</span>[] <span style="color: #0000ff;">getField</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #228b22;">Field</span>[] <span style="color: #0000ff;">getFields</span>();
<span style="color: #228b22;">Field</span> <span style="color: #0000ff;">getDeclaredField</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #228b22;">Field</span>[] <span style="color: #0000ff;">getDeclaredFields</span>();
<span style="color: #228b22;">Method</span>[] <span style="color: #0000ff;">getMethods</span>();
<span style="color: #228b22;">Method</span>[] <span style="color: #0000ff;">getDeclaredMethods</span>();
<span style="color: #228b22;">Constructor</span>[] <span style="color: #0000ff;">getConstructors</span>();
<span style="color: #228b22;">Constructor</span>[] <span style="color: #0000ff;">getDeclaredConstructors</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.Constructor
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">newInstance</span>(<span style="color: #228b22;">Object</span>[] <span style="color: #a0522d;">args</span>);
<span style="color: #228b22;">Class</span> <span style="color: #0000ff;">getDeclaringClass</span>();
<span style="color: #228b22;">Class</span>[] <span style="color: #0000ff;">getExceptionTypes</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getModifiers</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getName</span>();
<span style="color: #228b22;">Class</span>[] <span style="color: #0000ff;">getParameterTypes</span>();
<span style="color: #228b22;">Class</span> <span style="color: #0000ff;">getReturnType</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.Modifier
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">String</span> <span style="color: #0000ff;">toString</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">modifiers</span>);
Static <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">IsAbstract</span>(<span style="color: #228b22;">Int</span> <span style="color: #a0522d;">Modifiers</span>);
Static <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">IsFinal</span>(<span style="color: #228b22;">Int</span> <span style="color: #a0522d;">Modifiers</span>);
Static <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">IsInterface</span>(<span style="color: #228b22;">Int</span> <span style="color: #a0522d;">Modifiers</span>);
Static <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">IsNative</span>(<span style="color: #228b22;">Int</span> <span style="color: #a0522d;">Modifiers</span>);
Static <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">IsPrivate</span>(<span style="color: #228b22;">Int</span> <span style="color: #a0522d;">Modifiers</span>);
Static <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">IsProtected</span>(<span style="color: #228b22;">Int</span> <span style="color: #a0522d;">Modifiers</span>);
Static <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">IsPublic</span>(<span style="color: #228b22;">Int</span> <span style="color: #a0522d;">Modifiers</span>);
Static <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">IsStatic</span>(<span style="color: #228b22;">Int</span> <span style="color: #a0522d;">Modifiers</span>);
Static <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">IsStrict</span>(<span style="color: #228b22;">Int</span> <span style="color: #a0522d;">Modifiers</span>);
Static <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">IsSynchronized</span>(<span style="color: #228b22;">Int</span> <span style="color: #a0522d;">Modifiers</span>);
Static <span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">IsVolatile</span>(<span style="color: #228b22;">Int</span> <span style="color: #a0522d;">Modifiers</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.AccessibleObject
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setAccessible</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">flag</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isAccessible</span>();
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">setAccessible</span>(<span style="color: #228b22;">AccessibleObject</span>[] <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">flag</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.Field
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">get</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">obj</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">set</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">obj</span>, <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">newValue</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.Array
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Object</span> <span style="color: #0000ff;">get</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">XXX</span> <span style="color: #0000ff;">getXXX</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">XXX&#26159;&#22522;&#26412;&#31867;&#22411;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">set</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>, <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">newValue</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">setXXX</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>, <span style="color: #228b22;">XXX</span> <span style="color: #a0522d;">value</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">getLength</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">array</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Object</span> <span style="color: #0000ff;">newInstance</span>(<span style="color: #228b22;">Class</span> <span style="color: #a0522d;">componentType</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">length</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Object</span> <span style="color: #0000ff;">newInstance</span>(<span style="color: #228b22;">Class</span> <span style="color: #a0522d;">componentType</span>, <span style="color: #228b22;">int</span>[] <span style="color: #a0522d;">lengths</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.Method
<span style="color: #a020f0;">public</span> <span style="color: #228b22;">Object</span> <span style="color: #0000ff;">invoke</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">implicitParameter</span>, <span style="color: #228b22;">Object</span>[] <span style="color: #a0522d;">explicitParamenters</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Throwable
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">printStackTrace</span>();
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org9ab2b75" class="outline-2">
<h2 id="org9ab2b75">接口和内部类</h2>
<div class="outline-text-2" id="text-org9ab2b75">
</div>
<div id="outline-container-org27fc015" class="outline-3">
<h3 id="org27fc015">接口</h3>
<div class="outline-text-3" id="text-org27fc015">
<p>
接口中的方法无需声明为public。接口中不能有实例域或方法，但是可以有静态域：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">Moveable</span> {
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">move</span>(<span style="color: #228b22;">double</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">double</span> <span style="color: #a0522d;">y</span>);
    <span style="color: #228b22;">double</span> <span style="color: #a0522d;">STEP</span> = 1.0;
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #228b22;">Comparable</span>&lt;<span style="color: #228b22;">T</span>&gt;
<span style="color: #228b22;">int</span> compareTo(<span style="color: #228b22;">T</span> <span style="color: #a0522d;">other</span>); 

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.Arrays
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">sort</span>(<span style="color: #228b22;">Object</span>[] <span style="color: #a0522d;">a</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Integer
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #0000ff;">compare</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>);
</pre>
</div>
</div>
</div>


<div id="outline-container-org8c73573" class="outline-3">
<h3 id="org8c73573">克隆</h3>
<div class="outline-text-3" id="text-org8c73573">
<p>
Object的方法clone是protected级别的，而且只实现了浅拷贝。如果要自定义克隆行为，需要实现Cloneable接口。Cloneable接口没有方法。这样的接口叫做标记接口（tagging interface）。唯一不同的是数组。每个数组的clone方法都是public的。
</p>
</div>
</div>

<div id="outline-container-orgec61261" class="outline-3">
<h3 id="orgec61261">内部类</h3>
<div class="outline-text-3" id="text-orgec61261">
<p>
内部类是定义在类中的一个类。内部类的好处是可以访问外部类的私有成员，还可以对包中的其他类保持隐藏。内部类保存了指向外部类的引用，这个引用的名字是：
</p>
<div class="org-src-container">
<pre class="src src-java">OuterClass.<span style="color: #a020f0;">this</span>
</pre>
</div>

<p>
在虚拟机层面是没有内部类概念的。内部类会被编译器进行扩展并编译成一个普通的类。如果只需要建立一个内部类实例，这个内部类可以不具名。一利用这个特性产生了一一种技巧：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">ArrayList</span>&lt;<span style="color: #228b22;">String</span>&gt; <span style="color: #a0522d;">friends</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">ArrayList</span>&lt;&gt;();
friends.add(<span style="color: #8b2252;">"Harry"</span>);
friends.add(<span style="color: #8b2252;">"Tony"</span>);
invite(friends);
<span style="color: #b22222;">// </span><span style="color: #b22222;">&#31561;&#20215;&#20110;</span>
invite(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">ArrayList</span>&lt;<span style="color: #228b22;">String</span>&gt;() {{ add(<span style="color: #8b2252;">"Harry"</span>); add(<span style="color: #8b2252;">"Tony"</span>); }})
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org99e0f38" class="outline-2">
<h2 id="org99e0f38">代理</h2>
<div class="outline-text-2" id="text-org99e0f38">
<p>
如果需要使用某个接口，但在编译器无法确定需要使用哪个实现，可以使用代理动态创建接口实现对象。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.InvocationHandler
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">invoke</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">proxy</span>, <span style="color: #228b22;">Method</span> <span style="color: #a0522d;">method</span>, <span style="color: #228b22;">Object</span>[] <span style="color: #a0522d;">args</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.Proxy
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Class</span> <span style="color: #0000ff;">getProxyClass</span>(<span style="color: #228b22;">ClassLoader</span> <span style="color: #a0522d;">loader</span>, <span style="color: #228b22;">Class</span>[] <span style="color: #a0522d;">interfaces</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Object</span> <span style="color: #0000ff;">newProxyInstance</span>(<span style="color: #228b22;">ClassLoader</span> <span style="color: #a0522d;">laoder</span>, <span style="color: #228b22;">Class</span>[] <span style="color: #a0522d;">interfaces</span>, <span style="color: #228b22;">InvocationHandler</span> <span style="color: #a0522d;">handler</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isProxyClass</span>(<span style="color: #228b22;">Class</span> <span style="color: #a0522d;">c</span>);
</pre>
</div>
</div>
</div>


<div id="outline-container-org7df3c08" class="outline-2">
<h2 id="org7df3c08">部署应用程序</h2>
<div class="outline-text-2" id="text-org7df3c08">
<p>
每个jar文件有一个清单文件MANIFEST.MF：
</p>
<div class="org-src-container">
<pre class="src src-manifest">Manifest-Version: 1.0

Main-Class: com.foo.app

Name: com/foo/bar
Sealed: true
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Properties</span>
<span style="color: #0000ff;">Properties</span>();
Properties(<span style="color: #228b22;">Properties</span> <span style="color: #a0522d;">defaults</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getProperty</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">key</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getProperty</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">defaultValue</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">load</span>(<span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span>) <span style="color: #a020f0;">throws</span> <span style="color: #228b22;">IOException</span>;
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">store</span>(<span style="color: #228b22;">OutputStream</span> <span style="color: #a0522d;">out</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">firstLine</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.System
<span style="color: #228b22;">Properties</span> <span style="color: #0000ff;">getProperties</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getProperty</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">key</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-org32132b1" class="outline-2">
<h2 id="org32132b1">异常、断言、日志和调试</h2>
<div class="outline-text-2" id="text-org32132b1">
</div>
<div id="outline-container-org049c23f" class="outline-3">
<h3 id="org049c23f">异常</h3>
<div class="outline-text-3" id="text-org049c23f">
<p>
java中的所有异常都是Throwable的派生类。Throwable有两个直接的子类：Error和Exception。Error是Java运行时报告的内部错误，比如资源耗尽等。应用程序不得抛出Error。Exception分为RuntimeException和其他异常。RuntimeException是在程序中的逻辑错误。java把Error和RuntimeException归类为未检查（unchecked）异常，未检查异常不会在编译时进行检查。
</p>

<p>
java支持一次捕获多个异常：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">try</span> {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">...</span>
} <span style="color: #a020f0;">catch</span> (FileNotFoundException | UnknownHostException e) {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">...</span>
}
</pre>
</div>
<p>
在捕获多个异常时，这个的e隐含具有final属性。
</p>

<p>
异常打断了正常的程序流。为了避免产生资源泄露，java提供了finally块。finally在返回之前执行。在使用finally块有两点要注意，一是finally里的异常也需要捕获，二是finally中如果有return语句，原始的返回值会被覆盖。对于第一点，有一个简短的框架：
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span> = ...;

<span style="color: #a020f0;">try</span> {

    <span style="color: #a020f0;">try</span> {
        <span style="color: #b22222;">// </span><span style="color: #b22222;">...</span>
    } <span style="color: #a020f0;">finally</span> {
        <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22788;&#29702;in&#25243;&#20986;&#30340;&#24322;&#24120;&#12290;</span>
        in.close();
    }
} <span style="color: #a020f0;">catch</span> (<span style="color: #228b22;">IOException</span> <span style="color: #a0522d;">e</span>) {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22788;&#29702;in.close()&#25243;&#20986;&#30340;&#24322;&#24120;&#12290;</span>
}
</pre>
</div>

<p>
为了避免这么繁琐的代码，Java因为了一种新的try特性，叫做try-with-resources：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">try</span> (<span style="color: #228b22;">Scanner</span> <span style="color: #a0522d;">in</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Scanner</span>(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">FileInputStream</span>(<span style="color: #8b2252;">"/usr/share/dict/words"</span>)),
     <span style="color: #a0522d;">PrintWriter</span> out = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">PrintWriter</span>(<span style="color: #8b2252;">"out.txt"</span>)) {
    <span style="color: #a020f0;">while</span> (in.hasNext())
        out.println(in.next().toUpperCase());
}
</pre>
</div>
<p>
所谓的资源就是接口AutoCloseable的实现。使用try-with-resources时，当try块结束后，资源的close()会被自动调用。如果close()抛出异常，这个异常通过Throwable.addSuppressed()被抑制并延迟抛出。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #228b22;">Throwable</span>
<span style="color: #0000ff;">Throwable</span>(<span style="color: #228b22;">Throwable</span> <span style="color: #a0522d;">cause</span>);
Throwable(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">message</span>);
<span style="color: #228b22;">Throwable</span> <span style="color: #0000ff;">initCause</span>(<span style="color: #228b22;">Throwable</span> <span style="color: #a0522d;">cause</span>);
<span style="color: #228b22;">Throwable</span> <span style="color: #0000ff;">getCause</span>();
<span style="color: #228b22;">StackTraceElement</span>[] <span style="color: #0000ff;">getStackTrace</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">addSuppressed</span>(<span style="color: #228b22;">Throwable</span> <span style="color: #a0522d;">t</span>);
<span style="color: #228b22;">Throwable</span>[] <span style="color: #0000ff;">getSuppressed</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #228b22;">Exception</span>
<span style="color: #0000ff;">Exception</span>(<span style="color: #228b22;">Throwable</span> <span style="color: #a0522d;">cause</span>);
Exception(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">message</span>, <span style="color: #228b22;">Throwable</span> <span style="color: #a0522d;">cause</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #228b22;">RuntimeException</span>
<span style="color: #0000ff;">RuntimeException</span>(<span style="color: #228b22;">Throwable</span> <span style="color: #a0522d;">cause</span>);
RuntimeException(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">message</span>, <span style="color: #228b22;">Throwable</span> <span style="color: #a0522d;">cause</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.StackTraceElement
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getFileName</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getLineNumber</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getClassName</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getMethodName</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isNativeMethod</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">toString</span>();
</pre>
</div>
</div>
</div>

<div id="outline-container-org98785bf" class="outline-3">
<h3 id="org98785bf">断言</h3>
<div class="outline-text-3" id="text-org98785bf">
<p>
断言可以检查前置条件：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">assert</span> <span style="color: #a0522d;">x</span>&gt;=0;
<span style="color: #228b22;">assert</span> <span style="color: #a0522d;">x</span>&gt;=0 : <span style="color: #8b2252;">"x is less than 0"</span>;
</pre>
</div>

<p>
如果断言检查失败，会抛出一个AssertionError对象。断言是类加载器的功能，可以在没有重新编译代码的情况下开启或关闭：
</p>
<div class="org-src-container">
<pre class="src src-bash">java -enableassertions MyApp
java -ea:MyClass -ea:com.mycompany.mylib MyApp
java -da:MyApp
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.ClassLoader
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setDefaultAssertionStatus</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setClassAssertionStatus</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">className</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setPackageAssertionStatus</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">packageName</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">clearAssertionStatus</span>();
</pre>
</div>
</div>
</div>

<div id="outline-container-org9933ba2" class="outline-3">
<h3 id="org9933ba2">日志</h3>
<div class="outline-text-3" id="text-org9933ba2">
<p>
Java自带的日志库支持7个级别的日志：
</p>
<div class="org-src-container">
<pre class="src src-java">SERVER
WARNING
INFO
CONFIG
FINE
<span style="color: #228b22;">FINER</span>
<span style="color: #a0522d;">FINEST</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">Logger</span> <span style="color: #a0522d;">logger</span> = Logger.getLogger(<span style="color: #8b2252;">"com.mycompany.myapp"</span>);
<span style="color: #228b22;">Logger</span> <span style="color: #a0522d;">logger</span> = Logger.getGlobal();
logger.setLevel(<span style="color: #008b8b;">Level</span>.FINE);
logger.warning(message);
logger.fine(message);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">logging</span>.Logger
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">entering</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">className</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">methodName</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">exiting</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">className</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">methodName</span>);
</pre>
</div>

<p>
使用-verbose可以观察JVM加载类的过程。
</p>

<p>
-Xlint可以进行检查
</p>
<pre class="example">
-Xlint
-Xlint:all 
-Xlint:none
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeb9d718" class="outline-2">
<h2 id="orgeb9d718">泛型程序设计</h2>
<div class="outline-text-2" id="text-orgeb9d718">
<p>
泛型类
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">Pair</span>&lt;<span style="color: #228b22;">T</span>,<span style="color: #228b22;">U</span>&gt; {
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">T</span> <span style="color: #a0522d;">first</span>;
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">U</span> <span style="color: #a0522d;">second</span>;
}
</pre>
</div>

<p>
泛型方法
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">class</span> <span style="color: #228b22;">Array</span> {
    <span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> &lt;<span style="color: #228b22;">T</span>&gt; <span style="color: #228b22;">T</span> <span style="color: #0000ff;">getMiddle</span>(<span style="color: #228b22;">T</span>... <span style="color: #a0522d;">array</span>) {
        <span style="color: #a020f0;">return</span> a[a.length / 2];
    }
}
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">middle</span> = Array.&lt;<span style="color: #228b22;">String</span>&gt;getMiddle(<span style="color: #8b2252;">"John"</span>, <span style="color: #8b2252;">"Q."</span>, <span style="color: #8b2252;">"Public"</span>);
</pre>
</div>

<p>
泛型限定
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> &lt;<span style="color: #228b22;">T</span> <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Comparable</span>&gt; <span style="color: #228b22;">T</span> <span style="color: #0000ff;">min</span>(<span style="color: #228b22;">T</span>[] <span style="color: #a0522d;">a</span>);
<span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">Foo</span>&lt;<span style="color: #228b22;">T</span> <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Comparable</span> &amp; <span style="color: #228b22;">Serializable</span>, <span style="color: #228b22;">U</span>&gt; {...}
</pre>
</div>

<p>
对于泛型类，java会提供一个相应的原始类型（raw type），将类型参数擦除。实际上使用的类都是擦除后的原始类。因此java没有代码膨胀的问题。（类似TypeScript的强类型：在编译期检查）。
</p>

<p>
泛型方法也存在类型参数擦除的情况。为了保留多态，java会合成一个桥方法。在虚拟机层面，返回值是签名的一部分，虽然在语言层不是这样。
</p>

<p>
由于类型擦除，Pair&lt;Double&gt;和Pair&lt;Integer&gt;的getClass()返回同一个字符串。instanceof也无法判断。
</p>


<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #228b22;">void</span> <span style="color: #a0522d;">print</span>&lt;<span style="color: #228b22;">Pair</span>&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Employee</span>&gt; pair) {...}
? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">Manager</span>
</pre>
</div>


<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #228b22;">Class</span>&lt;<span style="color: #228b22;">T</span>&gt;
<span style="color: #0000ff;">T</span> newInstance();
<span style="color: #228b22;">T</span> <span style="color: #0000ff;">cast</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">obj</span>);
<span style="color: #228b22;">T</span>[] <span style="color: #0000ff;">getEnumConstants</span>();
<span style="color: #228b22;">Class</span>&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt; <span style="color: #0000ff;">getSuperclass</span>();
<span style="color: #228b22;">Constructor</span>&lt;<span style="color: #228b22;">T</span>&gt; <span style="color: #0000ff;">getConstructor</span>(<span style="color: #228b22;">Class</span>... <span style="color: #a0522d;">paramTypes</span>);
<span style="color: #228b22;">Constructor</span>&lt;<span style="color: #228b22;">T</span>&gt; <span style="color: #0000ff;">getDeclaredConstructor</span>(<span style="color: #228b22;">Class</span>... <span style="color: #a0522d;">paramTypes</span>);
<span style="color: #228b22;">TypeVariable</span>[] <span style="color: #0000ff;">getTypeParameters</span>();
<span style="color: #228b22;">Type</span> <span style="color: #0000ff;">getGenericSuperclass</span>();
<span style="color: #228b22;">Type</span>[] <span style="color: #0000ff;">getGenericInterfaces</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.<span style="color: #228b22;">Constructor</span>&lt;<span style="color: #228b22;">T</span>&gt;
<span style="color: #0000ff;">T</span> newInstance(<span style="color: #228b22;">Object</span>... <span style="color: #a0522d;">params</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-org6400cb1" class="outline-2">
<h2 id="org6400cb1">集合</h2>
<div class="outline-text-2" id="text-org6400cb1">
<p>
java集合的基本接口是Collection：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">Collection</span>&lt;<span style="color: #228b22;">E</span>&gt; {
    <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">add</span>(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>);
    <span style="color: #228b22;">Iterator</span>&lt;<span style="color: #228b22;">E</span>&gt; <span style="color: #0000ff;">iterator</span>();
    <span style="color: #228b22;">int</span> <span style="color: #0000ff;">size</span>();
    <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isEmpty</span>();
    <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">contains</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">obj</span>);
    <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">containsAll</span>(<span style="color: #228b22;">Collection</span>&lt;?&gt; <span style="color: #a0522d;">c</span>);
    <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">addAll</span>(<span style="color: #228b22;">Collection</span>&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">E</span>&gt; <span style="color: #a0522d;">from</span>);
    <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">remove</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">obj</span>);
    <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">removeAll</span>(<span style="color: #228b22;">Collection</span>&lt;?&gt; <span style="color: #a0522d;">c</span>);
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">clear</span>();
    <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">retainAll</span>(<span style="color: #228b22;">Collection</span>&lt;?&gt; <span style="color: #a0522d;">c</span>);
    <span style="color: #228b22;">Object</span>[] <span style="color: #0000ff;">toArray</span>();
    &lt;<span style="color: #228b22;">T</span>&gt; T[] toArray(<span style="color: #228b22;">T</span>[] <span style="color: #a0522d;">arrayToFit</span>);
}
</pre>
</div>
<p>
Iterator接口是一个迭代器：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">Iterator</span>&lt;<span style="color: #228b22;">E</span>&gt; {
    <span style="color: #228b22;">E</span> <span style="color: #0000ff;">next</span>();
    <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">hasNext</span>();
    <span style="color: #228b22;">void</span> <span style="color: #0000ff;">remove</span>();
}
</pre>
</div>

<p>
java中的容器有：
</p>

<p>
ArrayList
LinkedList
ArrayDeque
HashSet
TreeSet
EnumSet
LinkedHashSet
PriorityQueue
HashMap
TreeMap
EnumMap
LinkedHashMap
WeakHashMap
IdentityHashMap
SortedSet
SortedMap
NavigableSet
NavigableMap
</p>

<p>
TreeSet和TreeMap是支持排序的容器，内部使用红黑树记录元素，并要求元素实现Comparable接口。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #228b22;">Comparable</span>&lt;<span style="color: #228b22;">T</span>&gt;
<span style="color: #228b22;">int</span> compareTo(<span style="color: #228b22;">T</span> <span style="color: #a0522d;">other</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Comparator</span>&lt;<span style="color: #228b22;">T</span>&gt;
<span style="color: #228b22;">int</span> compare(<span style="color: #228b22;">T</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">b</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">SortedSet</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #228b22;">Comparator</span>&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">E</span>&gt; comparator();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">first</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">last</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">ceiling</span>(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">value</span>);
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">floor</span>(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">value</span>);
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">pollFirst</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">pollLast</span>();
<span style="color: #228b22;">Iterator</span>&lt;<span style="color: #228b22;">E</span>&gt; <span style="color: #0000ff;">descendingIterator</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">TreeSet</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #0000ff;">TreeSet</span>();
TreeSet(<span style="color: #228b22;">Comparator</span>&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">E</span>&gt; <span style="color: #a0522d;">c</span>);
TreeSet(<span style="color: #228b22;">SortedSet</span>&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">E</span>&gt; <span style="color: #a0522d;">elements</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Queue</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #228b22;">boolean</span> add(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">offer</span>(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">elment</span>);
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">remove</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">poll</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">element</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">peek</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Deque</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #228b22;">void</span> addFirst(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">addLast</span>(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">offerFirst</span>(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">offerLast</span>(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>);
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">removeFirst</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">removeLast</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">pollFirst</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">pollLast</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">getFirst</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">getLast</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">peekFirst</span>();
<span style="color: #228b22;">E</span> <span style="color: #0000ff;">peekLast</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">ArrayDeque</span>&lt;<span style="color: #228b22;">E</span>&gt;

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #a0522d;">PriorityQueue</span>

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Map</span>&lt;<span style="color: #228b22;">K</span>,<span style="color: #228b22;">V</span>&gt;
V get(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">key</span>);
<span style="color: #228b22;">V</span> <span style="color: #0000ff;">put</span>(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">V</span> <span style="color: #a0522d;">value</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">putAll</span>(<span style="color: #228b22;">Map</span>&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">K</span>, ? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">V</span>&gt; <span style="color: #a0522d;">entries</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">containsKey</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">key</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">containsValue</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">value</span>);
<span style="color: #228b22;">Set</span>&lt;<span style="color: #008b8b;">Map</span>.<span style="color: #228b22;">Entry</span>&lt;<span style="color: #228b22;">K</span>,<span style="color: #228b22;">V</span>&gt;&gt; <span style="color: #0000ff;">entrySet</span>();
<span style="color: #228b22;">Set</span>&lt;<span style="color: #228b22;">K</span>&gt; <span style="color: #0000ff;">keySet</span>();
<span style="color: #228b22;">Collection</span>&lt;<span style="color: #228b22;">V</span>&gt; <span style="color: #0000ff;">values</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">Map</span>.<span style="color: #228b22;">Entry</span>&lt;<span style="color: #228b22;">K</span>,<span style="color: #228b22;">V</span>&gt;
<span style="color: #0000ff;">K</span> getKey();
<span style="color: #228b22;">V</span> <span style="color: #0000ff;">getValue</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">HashMap</span>&lt;<span style="color: #228b22;">K</span>,<span style="color: #228b22;">V</span>&gt;
<span style="color: #0000ff;">HashMap</span>();
HashMap(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">initialCapacity</span>);
HashMap(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">initialCapacity</span>, <span style="color: #228b22;">float</span> <span style="color: #a0522d;">loadFactor</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#40664;&#35748;0.75</span>

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">TreeMap</span>&lt;<span style="color: #228b22;">K</span>,<span style="color: #228b22;">V</span>&gt;
<span style="color: #0000ff;">TreeMap</span>(&lt;<span style="color: #228b22;">Comparator</span>&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">K</span>&gt; c);
TreeMap(Map&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">K</span>, ? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">V</span>&gt; entries);
TreeMap(SortedMap&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">K</span>, ? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">V</span>&gt; entries);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">SortedMap</span>&lt;<span style="color: #228b22;">K</span>,<span style="color: #228b22;">V</span>&gt;
<span style="color: #228b22;">Comparator</span>&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">K</span>&gt; comparator();
<span style="color: #228b22;">K</span> <span style="color: #0000ff;">firstKey</span>();
<span style="color: #228b22;">K</span> <span style="color: #0000ff;">lastKey</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.Collections
</pre>
</div>
</div>
</div>


<div id="outline-container-org77764ab" class="outline-2">
<h2 id="org77764ab">多线程</h2>
<div class="outline-text-2" id="text-org77764ab">
<p>
调用线程的interrupt()方法会设置中断标志位，后者可以通过isInterrupted()获得。
</p>

<p>
线程有如下6种状态：
</p>

<p>
New。线程已经创建，但尚未运行。
Runnable。线程调用了start()。
Blocked。线程试图获取一个内部锁（非java.util.concurrent中的锁）。
Waiting。等待其他对象。
Timed waiting。带有超时的等待。
Terminated。run()正常退出，或者发生了未捕获的异常。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Thread
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">join</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">join</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">milliseconds</span>);
<span style="color: #008b8b;">Thread</span>.<span style="color: #228b22;">State</span> <span style="color: #0000ff;">getState</span>();
</pre>
</div>

<p>
线程的优先级从MIN<sub>PRIORITY</sub>（1）到MAX<sub>PRIORITY</sub>（10），默认是NORM<sub>PRIORITY</sub>（5）。这些优先级会被映射为操作系统中的线程优先级。Java在调度线程时会首先选择高优先级线程，如果设计不当，低优先级线程可能发生饥饿。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Thread
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setPriority</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">newPriority</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">yield</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setDaemon</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">isDaemon</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">setDefaultUncaughtExceptionHandler</span>(<span style="color: #008b8b;">Thread</span>.<span style="color: #228b22;">UncaughtExceptionHandler</span> <span style="color: #a0522d;">handler</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">Thread</span>.UncaughtExceptionHandler
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">uncaughtException</span>(<span style="color: #228b22;">Thread</span> <span style="color: #a0522d;">t</span>, <span style="color: #228b22;">Throwable</span> <span style="color: #a0522d;">e</span>);
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #008b8b;">locks</span>.Lock
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">lock</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">unlock</span>();
<span style="color: #228b22;">Condition</span> <span style="color: #0000ff;">newCondition</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #008b8b;">locks</span>.<span style="color: #228b22;">ReentrantLock</span>
<span style="color: #0000ff;">ReentrantLock</span>()
ReentrantLock(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">fair</span>)

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #008b8b;">locks</span>.Condition
<span style="color: #228b22;">void</span> await();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">signalAll</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">signal</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Object
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">notifyAll</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">notify</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">wait</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">wait</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">millis</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">wait</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">millis</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">nanos</span>);
</pre>
</div>

<p>
synchronized会产生一个内部锁：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> synchonrized <span style="color: #228b22;">void</span> <span style="color: #0000ff;">foo</span>() {...}

<span style="color: #a020f0;">synchronized</span> (obj) {
  <span style="color: #b22222;">// </span><span style="color: #b22222;">cirtical section</span>
}
</pre>
</div>

<p>
volatile告诉java一个域可能被其他线程并发修改，因此java会在读取volatile前插入一个读内存屏障，保障读取到的值是最新的。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #228b22;">ThreadLocal</span>&lt;<span style="color: #228b22;">T</span>&gt;
<span style="color: #0000ff;">T</span> get();
<span style="color: #a020f0;">protected</span> <span style="color: #0000ff;">initialize</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">set</span>(<span style="color: #228b22;">T</span> <span style="color: #a0522d;">t</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">remove</span>();
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #008b8b;">locks</span>.ReentrantReadWriteLock
<span style="color: #228b22;">Lock</span> <span style="color: #0000ff;">readLock</span>();
<span style="color: #228b22;">Lock</span> <span style="color: #0000ff;">writeLock</span>();
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">ArrayBlockingQueue</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">LinkedBlockingQueue</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">LinkedBlockingDeque</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">DelayQueue</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">PriorityBlockingQueue</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">BlockingQueue</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">TransferQueue</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">ConcurrentLinkedQueue</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">ConcurrentSkipListSet</span>&lt;<span style="color: #228b22;">E</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">ConcurrentHashMap</span>&lt;<span style="color: #228b22;">K</span>,<span style="color: #228b22;">V</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">ConcurrentSkipListMap</span>&lt;<span style="color: #228b22;">K</span>,<span style="color: #228b22;">V</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.CopyOnWriteArrayList
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.CopyOnWriteArraySet
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">Callable</span>&lt;<span style="color: #228b22;">V</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">Future</span>&lt;<span style="color: #228b22;">V</span>&gt;
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">FutureTask</span>&lt;<span style="color: #228b22;">V</span>&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.Executors
<span style="color: #228b22;">ExecutorService</span> <span style="color: #0000ff;">newCachedThreadPool</span>();
<span style="color: #228b22;">ExecutorService</span> <span style="color: #0000ff;">newFixedThreadPool</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">threads</span>);
<span style="color: #228b22;">ExecutorService</span> <span style="color: #0000ff;">newSingleThreadExecutor</span>();
<span style="color: #228b22;">ScheduledExecutorService</span> <span style="color: #0000ff;">newScheduledThreadPool</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">threads</span>);
<span style="color: #228b22;">ScheduledExecutorService</span> <span style="color: #0000ff;">newSingleThreadScheduledExecutor</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.ExecutorService
<span style="color: #228b22;">Future</span>&lt;<span style="color: #228b22;">T</span>&gt; <span style="color: #0000ff;">submit</span>(<span style="color: #228b22;">Callable</span>&lt;<span style="color: #228b22;">T</span>&gt; <span style="color: #a0522d;">task</span>);
<span style="color: #228b22;">Future</span>&lt;<span style="color: #228b22;">T</span>&gt; <span style="color: #0000ff;">submit</span>(<span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">task</span>, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">result</span>);
<span style="color: #228b22;">Future</span>&lt;<span style="color: #228b22;">T</span>&gt; <span style="color: #0000ff;">submit</span>(<span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">task</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">shutdown</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.ThreadPoolExecutor
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getLargestPoolSize</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.ScheduledExecutorService
<span style="color: #228b22;">ScheduledFuture</span>&lt;<span style="color: #228b22;">V</span>&gt; <span style="color: #0000ff;">schedule</span>(<span style="color: #228b22;">Callable</span>&lt;<span style="color: #228b22;">V</span>&gt; <span style="color: #a0522d;">task</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>);
<span style="color: #228b22;">ScheduledFuture</span>&lt;<span style="color: #228b22;">V</span>&gt; <span style="color: #0000ff;">schedule</span>(Callable&lt;<span style="color: #228b22;">Runnable</span> task, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>);
<span style="color: #228b22;">ScheduledFuture</span>&lt;?&gt; <span style="color: #0000ff;">scheduleAtFixedRate</span>(<span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">task</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">initialDelay</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">period</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>);
<span style="color: #228b22;">ScheduledFuture</span>&lt;?&gt; <span style="color: #0000ff;">scheduleWithFixedDelay</span>(<span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">task</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">initialDelay</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">period</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>);
</pre>
</div>
</div>
</div>



<div id="outline-container-orgd30eaa7" class="outline-2">
<h2 id="orgd30eaa7">流与文件</h2>
<div class="outline-text-2" id="text-orgd30eaa7">
<p>
InputStream的抽象方法
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.InputStream
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">read</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">read</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">read</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">b</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">off</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">len</span>);
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">skip</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">n</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">available</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">close</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.OutputStream
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">write</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">write</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">write</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">b</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">off</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">len</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">close</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">flush</span>();
</pre>
</div>

<p>
read()和write()是阻塞的。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.Closeable
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">close</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.Flushable
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">flush</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Readable
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">read</span>(<span style="color: #228b22;">CharBuffer</span> <span style="color: #a0522d;">ch</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Appendable
<span style="color: #228b22;">Appendable</span> <span style="color: #0000ff;">append</span>(<span style="color: #228b22;">char</span> <span style="color: #a0522d;">c</span>);
<span style="color: #228b22;">Appendable</span> <span style="color: #0000ff;">append</span>(<span style="color: #228b22;">CharSequence</span> <span style="color: #a0522d;">cs</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.CharSequence
<span style="color: #228b22;">char</span> <span style="color: #0000ff;">charAt</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">length</span>();
<span style="color: #228b22;">CharSequence</span> <span style="color: #0000ff;">subSequence</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">start</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">end</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">toString</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.<span style="color: #228b22;">FileInputStream</span>
<span style="color: #0000ff;">FileInputStream</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
FileInputStream(<span style="color: #228b22;">File</span> <span style="color: #a0522d;">file</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.<span style="color: #228b22;">FileOutputStream</span>
<span style="color: #0000ff;">FileOutputStream</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
FileOutputStream(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">append</span>);
FileOutputStream(<span style="color: #228b22;">File</span> <span style="color: #a0522d;">file</span>);
FileOutputStream(<span style="color: #228b22;">File</span> <span style="color: #a0522d;">file</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">append</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.<span style="color: #228b22;">BufferedInputStream</span>
<span style="color: #0000ff;">BufferedInputStream</span>(<span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.<span style="color: #228b22;">BufferedOutputStream</span>
<span style="color: #0000ff;">BufferedOutputStream</span>(<span style="color: #228b22;">OutputStream</span> <span style="color: #a0522d;">out</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.<span style="color: #228b22;">PushbackInputStream</span>
<span style="color: #0000ff;">PushbackInputStream</span>(<span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span>);
PushbackInputStream(<span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">size</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">unread</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>);
</pre>
</div>


<p>
InputStreamReader
OutputStreamWriter
FileReader
FileWriter
PrintWriter
PrintStream
</p>

<div class="org-src-container">
<pre class="src src-java">PrintWriter(<span style="color: #228b22;">Writer</span> <span style="color: #a0522d;">out</span>);
PrintWriter(<span style="color: #228b22;">Writer</span> <span style="color: #a0522d;">out</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">autoFlush</span>);
PrintWriter(<span style="color: #228b22;">OutputStream</span> <span style="color: #a0522d;">out</span>);
PrintWriter(<span style="color: #228b22;">OutputStream</span> <span style="color: #a0522d;">out</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">autoFlush</span>);
PrintWriter(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">filename</span>);
PrintWriter(<span style="color: #228b22;">File</span> <span style="color: #a0522d;">file</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">print</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">obj</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">print</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">println</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">print</span>(<span style="color: #228b22;">char</span>[] <span style="color: #a0522d;">s</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">print</span>(<span style="color: #228b22;">char</span> <span style="color: #a0522d;">c</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">print</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">print</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">l</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">print</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">f</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">print</span>(<span style="color: #228b22;">double</span> <span style="color: #a0522d;">d</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">print</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">printf</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">format</span>, <span style="color: #228b22;">Object</span>... <span style="color: #a0522d;">args</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">checkError</span>();
</pre>
</div>

<p>
二进制数据输出使用DataOutputStream。文本使用PrintWriter。
</p>
</div>



<div id="outline-container-orgf716a71" class="outline-3">
<h3 id="orgf716a71">字符集</h3>
<div class="outline-text-3" id="text-orgf716a71">
<p>
Java提供了类java.nio.Charset处理字符集和二进制数据的转换。在使用时，首选使用静态方法forName()得到字符集对象：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">Charset</span> <span style="color: #a0522d;">charset</span> = Charset.forName(<span style="color: #8b2252;">"ISO-8859-1"</span>);
</pre>
</div>

<p>
然后调用encode()或decode()进行编码或解码：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">String</span> <span style="color: #a0522d;">message</span> = <span style="color: #8b2252;">"hello, world!"</span>;
<span style="color: #228b22;">Charset</span> <span style="color: #a0522d;">charset</span> = Charset.forName(<span style="color: #8b2252;">"UTF-8"</span>);
<span style="color: #228b22;">ByteBuffer</span> <span style="color: #a0522d;">encodeBuffer</span> = charset.encode(message);
<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">binary</span> = encodeBuffer.array();

<span style="color: #228b22;">ByteBuffer</span> <span style="color: #a0522d;">decodeBuffer</span> = ByteBuffer.wrap(binary, 0, binary.length);
<span style="color: #228b22;">CharBuffer</span> <span style="color: #a0522d;">charBuffer</span> = charset.decode(decodeBuffer);
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">decoded</span> = charBuffer.toString();
</pre>
</div>

<p>
字符集的名字可以从 <a href="http://www.iana.org/assignments/charset-sets">http://www.iana.org/assignments/charset-sets</a> 中找到。字符集可以具有别名。方法Charset.aliases()返回一个Set&lt;String&gt;，记录了全部别名。静态方法Charset.availableCharsets()返回的Map&lt;String,Charset&gt;对象记录了系统中的全部字符集。
</p>
</div>
</div>

<div id="outline-container-org10f155c" class="outline-3">
<h3 id="org10f155c">二进制输入输出</h3>
<div class="outline-text-3" id="text-org10f155c">
<p>
二进制输入输出可以通过java.io.DataOutput和java.io.DataInput接口完成。DataOutput接口提供如下方法：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeChars</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeByte</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeInt</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeShort</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">s</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeLong</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">i</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeFloat</span>(<span style="color: #228b22;">float</span> <span style="color: #a0522d;">f</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeDouble</span>(<span style="color: #228b22;">double</span> <span style="color: #a0522d;">d</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeChar</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">c</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeBoolean</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeUTF</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>);
</pre>
</div>

<p>
类似的，DataInput提供如下方法：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">int</span> <span style="color: #0000ff;">readInt</span>();
<span style="color: #228b22;">short</span> <span style="color: #0000ff;">readShort</span>();
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">readLong</span>();
<span style="color: #228b22;">float</span> <span style="color: #0000ff;">readFloat</span>();
<span style="color: #228b22;">double</span> <span style="color: #0000ff;">readDouble</span>();
<span style="color: #228b22;">char</span> <span style="color: #0000ff;">readChar</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">readBoolean</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">readUTF</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">readFully</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">readFully</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">b</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">off</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">len</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">skipBytes</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">n</span>);
</pre>
</div>

<p>
DataInputStream和DataOutputStream分别实现了DataInput和DataOutput接口，它们可以和FileInputStream、FileOutputStream结合使用：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">DataInputStream</span> <span style="color: #a0522d;">in</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">DataInputStream</span>(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">FileInputStream</span>(<span style="color: #8b2252;">"a.dat"</span>));
<span style="color: #228b22;">DataOutputStream</span> <span style="color: #a0522d;">out</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">DataOutputStream</span>(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">FileOutputStream</span>(<span style="color: #8b2252;">"a.dat"</span>));
</pre>
</div>




<p>
RandomAccessFile类实现了DataInput和DataOutput接口，封装了随机访问文件：
</p>
<div class="org-src-container">
<pre class="src src-java">RandomAccessFile(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">path</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">mode</span>);
RandomAccessFile(<span style="color: #228b22;">File</span> <span style="color: #a0522d;">file</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">mode</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">mode&#21487;&#20197;&#26159;r&#65306;&#21482;&#35835;&#12290;rw&#65306;&#35835;&#20889;&#12290;rws&#65306;&#21516;&#27493;&#35835;&#20889;&#12290;rwd&#65306;&#35835;&#21644;&#21516;&#27493;&#20889;&#12290;</span>
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">getFilePointer</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#24471;&#21040;&#25351;&#38024;&#20301;&#32622;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">seek</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">position</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#31227;&#21160;&#25991;&#20214;&#25351;&#38024;</span>
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">length</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#24471;&#21040;&#25991;&#20214;&#38271;&#24230;</span>
</pre>
</div>

<p>
对于Zip文件的输入输出，Java提供了ZipOutputStream（读取Zip）和ZipInputStream（写入Zip）：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">zip</span>.<span style="color: #228b22;">ZipInputStream</span>
<span style="color: #0000ff;">ZipInputStream</span>(<span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span>);
<span style="color: #228b22;">ZipEntry</span> <span style="color: #0000ff;">getNextEntry</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36820;&#22238;&#19979;&#20010;ZipEntry&#23545;&#35937;&#25110;null&#12290;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">closeEntry</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20851;&#38381;&#19978;&#20010;&#25171;&#24320;&#30340;ZipEntry&#23545;&#35937;&#12290;</span>

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">zip</span>.<span style="color: #228b22;">ZipOutputStream</span>
<span style="color: #0000ff;">ZipOutputStream</span>(<span style="color: #228b22;">OutputStream</span> <span style="color: #a0522d;">out</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">putNextEntry</span>(<span style="color: #228b22;">ZipEntry</span> <span style="color: #a0522d;">e</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#24314;&#31435;&#19968;&#20010;ZipEntry&#23545;&#35937;&#12290;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">closeEntry</span>(); 
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setLevel</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">level</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35774;&#32622;&#21518;&#32493;&#21387;&#32553;&#32423;&#21035;&#65292;&#40664;&#35748;&#20026;Deflater.DEFAULT_COMPRESSION&#12290;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setMethod</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">method</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35774;&#32622;&#40664;&#35748;&#21387;&#32553;&#26041;&#27861;&#65292;&#21487;&#20197;&#26159;DEFLATED&#25110;STORED&#12290;</span>

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">zip</span>.<span style="color: #228b22;">ZipEntry</span>
<span style="color: #0000ff;">ZipEntry</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">getCrc</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#33719;&#24471;CRC32&#26657;&#39564;&#21644;&#12290;</span>
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getName</span>();
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">getSize</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#33719;&#24471;&#21387;&#32553;&#21069;&#22823;&#23567;&#25110;-1&#12290;</span>
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isDirectory</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setMethod</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">method</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setSize</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">size</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35774;&#32622;&#39033;&#22823;&#23567;&#12290;&#20165;&#36866;&#29992;&#20110;STORED&#12290;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setCrc</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">crc</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35774;&#32622;CRC32&#26657;&#39564;&#21644;&#12290;&#20165;&#36866;&#29992;&#20110;STORED&#12290;</span>

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">zip</span>.<span style="color: #228b22;">ZipFile</span>
<span style="color: #0000ff;">ZipFile</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
ZipFile(<span style="color: #228b22;">File</span> <span style="color: #a0522d;">file</span>);
<span style="color: #228b22;">Enumeration</span> <span style="color: #0000ff;">entries</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26522;&#20030;&#21508;ZipEntry&#23545;&#35937;&#12290;</span>
<span style="color: #228b22;">ZipEntry</span> <span style="color: #0000ff;">getEntry</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #228b22;">InputStream</span> <span style="color: #0000ff;">getInputStream</span>(<span style="color: #228b22;">ZipEntry</span> <span style="color: #a0522d;">ze</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getName</span>();
</pre>
</div>
</div>
</div>


<div id="outline-container-org1ce0be0" class="outline-3">
<h3 id="org1ce0be0">对象流</h3>
<div class="outline-text-3" id="text-org1ce0be0">
<p>
如果一个类实现了Serializable接口（这个接口没有方法），就可以对其进行序列化和反序列化，并通过ObjectOutputStream和ObjectInputStream将保存或读取对象：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">ObjectOutputStream</span> <span style="color: #a0522d;">out</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">ObjectOutputStream</span>(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">FileOutputStream</span>(<span style="color: #8b2252;">"employee.dat"</span>));
<span style="color: #228b22;">Employee</span> <span style="color: #a0522d;">harry</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Employee</span>(...);
out.writeObject(harry);

<span style="color: #228b22;">ObjectInputStream</span> <span style="color: #a0522d;">in</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">ObjectInputStream</span>(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">FileInputStream</span>(<span style="color: #8b2252;">"employee.dat"</span>));
<span style="color: #228b22;">Employee</span> <span style="color: #a0522d;">e1</span> = (<span style="color: #228b22;">Employee</span>) in.readObject();
</pre>
</div>

<p>
如果某个域不应该被序列化，可以使用transient标记：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">LabeledPoint</span> <span style="color: #a020f0;">implements</span> <span style="color: #228b22;">Serializable</span> {
    <span style="color: #a020f0;">private</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">label</span>;
    <span style="color: #a020f0;">private</span> <span style="color: #a020f0;">transient</span> <span style="color: #008b8b;">Point2D</span>.<span style="color: #228b22;">Double</span> <span style="color: #a0522d;">point</span>;
}
</pre>
</div>

<p>
如果想要自己控制序列化和反序列化操作，可以重载下列函数：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">private</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">readObject</span>(<span style="color: #228b22;">ObjectInputStream</span> <span style="color: #a0522d;">in</span>) <span style="color: #a020f0;">throws</span> <span style="color: #228b22;">IOException</span>, <span style="color: #228b22;">ClassNotFoundException</span>;
<span style="color: #a020f0;">private</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeObject</span>(<span style="color: #228b22;">ObjectOutputStream</span> <span style="color: #a0522d;">out</span>) <span style="color: #a020f0;">throws</span> <span style="color: #228b22;">IOException</span>;
</pre>
</div>

<p>
Serializable对象在序列化时会生成序列化ID（serialVersionUID），同时虚拟机必须了解每个对象的结构，因此速度较慢。Serializable的子接口Externalizable没有上述两个问题，速度更快，内存占用更少。使用Externalizable需要实现方法：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">readExternal</span>(<span style="color: #228b22;">ObjectInputStream</span> <span style="color: #a0522d;">in</span>) <span style="color: #a020f0;">throws</span> <span style="color: #228b22;">IOException</span>, <span style="color: #228b22;">ClassNotFoundException</span>;
<span style="color: #a020f0;">public</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">writeExternal</span>(<span style="color: #228b22;">ObjectOutputStream</span> <span style="color: #a0522d;">out</span>) <span style="color: #a020f0;">throws</span> <span style="color: #228b22;">IOException</span>;
</pre>
</div>

<p>
为了支持序列化，每个类具有一个指纹。通过JDK自带的程序serialver可以查看类的指纹：
</p>
<div class="org-src-container">
<pre class="src src-java">serialver -<span style="color: #008b8b;">classpath</span> . Employee
</pre>
</div>

<p>
指纹也可以自定义，方法是定义域serialVersionUID：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">class</span> <span style="color: #228b22;">Employee</span> <span style="color: #a020f0;">implements</span> <span style="color: #228b22;">Serializable</span> {
    <span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> <span style="color: #a020f0;">final</span> <span style="color: #228b22;">long</span> <span style="color: #a0522d;">serialVersionUID</span> = -1814239825517340645L;
}
</pre>
</div>
</div>
</div>


<div id="outline-container-orgf24d1f7" class="outline-3">
<h3 id="orgf24d1f7">文件管理</h3>
<div class="outline-text-3" id="text-orgf24d1f7">
<p>
Java提供了File类封装文件（包括目录）：
</p>
<div class="org-src-container">
<pre class="src src-java">File(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">filename</span>);
File(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">directory</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
File(<span style="color: #228b22;">File</span> <span style="color: #a0522d;">directory</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">canRead</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">canWrite</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">canExecute</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">setReadable</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">state</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">ownerOnly</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">setWritable</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">state</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">ownerOnly</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">setExecutable</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">state</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">ownerOnly</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">createTempFile</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">prefix</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">suffix</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">createTempFile</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">prefix</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">suffix</span>, <span style="color: #228b22;">File</span> <span style="color: #a0522d;">directory</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">delete</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">deleteOnExit</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">exists</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getAbsolutePath</span>();
<span style="color: #228b22;">File</span> <span style="color: #0000ff;">getCanonicalFile</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getCanonicalPath</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getName</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getParent</span>();
<span style="color: #228b22;">File</span> <span style="color: #0000ff;">getParentFile</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getPath</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isDirectory</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isFile</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isHidden</span>();
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">lastModified</span>();
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">length</span>();
<span style="color: #228b22;">String</span>[] <span style="color: #0000ff;">list</span>();
<span style="color: #228b22;">String</span>[] <span style="color: #0000ff;">list</span>(<span style="color: #228b22;">FilenameFilter</span> <span style="color: #a0522d;">filter</span>);
<span style="color: #228b22;">File</span>[] <span style="color: #0000ff;">listFiles</span>();
<span style="color: #228b22;">File</span>[] <span style="color: #0000ff;">listFiles</span>(<span style="color: #228b22;">FilenameFilter</span> <span style="color: #a0522d;">filter</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">File</span>[] <span style="color: #0000ff;">listRoots</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">createNewFile</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">mkdir</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">mkdirs</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">renameTo</span>(<span style="color: #228b22;">File</span> <span style="color: #a0522d;">newName</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">setLastModified</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">setReadOnly</span>();
<span style="color: #228b22;">URL</span> <span style="color: #0000ff;">toURL</span>();
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">getTotalSpace</span>();
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">getFreeSpace</span>();
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">getUsableSpace</span>();
</pre>
</div>

<p>
java.io.FilenameFilter类可以按名称过滤文件：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">accept</span>(<span style="color: #228b22;">File</span> <span style="color: #a0522d;">directory</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-org3099564" class="outline-3">
<h3 id="org3099564">nio</h3>
<div class="outline-text-3" id="text-org3099564">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.FileInputStream
<span style="color: #228b22;">FileChannel</span> <span style="color: #0000ff;">getChannel</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.FileOutputStream
<span style="color: #228b22;">FileChannel</span> <span style="color: #0000ff;">getChannel</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">io</span>.RandomAccessFile
<span style="color: #228b22;">FileChannel</span> <span style="color: #0000ff;">getChannel</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">nio</span>.<span style="color: #008b8b;">channels</span>.FileChannel
<span style="color: #228b22;">MappedByteBuffer</span> <span style="color: #0000ff;">map</span>(<span style="color: #008b8b;">FileChannel</span>.<span style="color: #228b22;">MapMode</span> <span style="color: #a0522d;">mode</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">position</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">size</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">nio</span>.Buffer
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">hasRemaining</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">limit</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">nio</span>.ByteBuffer
<span style="color: #228b22;">byte</span> <span style="color: #0000ff;">get</span>();
<span style="color: #228b22;">byte</span> <span style="color: #0000ff;">get</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">ByteBuffer</span> <span style="color: #0000ff;">put</span>(<span style="color: #228b22;">byte</span> <span style="color: #a0522d;">b</span>);
</pre>
</div>

<p>
java.nio.Buffer封装了缓冲区。Buffer类有4个重要概念：
</p>

<p>
容量。Buffer可以包含的最大字节数，是固定的。
读写位置。下个读写操作执行的位置。
界限。读写位置的最大有效值。
标记。用于重复读写操作，是可选的。
</p>

<p>
在任意时刻，这4个值满足：
</p>

<p>
0 &lt;= 标记 &lt;= 读写位置 &lt;= 界限 &lt;= 容量
</p>

<p>
Buffer的方法有：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">Buffer</span> <span style="color: #0000ff;">clear</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35835;&#20889;&#20301;&#32622; := 0&#65292;&#30028;&#38480; := &#23481;&#37327;</span>
<span style="color: #228b22;">Buffer</span> <span style="color: #0000ff;">flip</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#30028;&#38480; := &#35835;&#20889;&#20301;&#32622;&#65292;&#35835;&#20889;&#20301;&#32622; := 0</span>
<span style="color: #228b22;">Buffer</span> <span style="color: #0000ff;">rewind</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35835;&#20889;&#20301;&#32622; := 0</span>
<span style="color: #228b22;">Buffer</span> <span style="color: #0000ff;">mark</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26631;&#35760; := &#35835;&#20889;&#20301;&#32622;</span>
<span style="color: #228b22;">Buffer</span> <span style="color: #0000ff;">reset</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35835;&#20889;&#20301;&#32622; := &#26631;&#35760;</span>
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">remaining</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">position</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">capacity</span>();
</pre>
</div>

<p>
Buffer是一个抽象类。在实际中使用的是它的派生类：ByteBuffer、CharBuffer、DoubleBuffer、IntBuffer、LongBuffer和ShortBuffer。
</p>


<p>
多线程访问同一个文件时，为了保证正确性，需要进行互斥。可以使用FileLock：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">nio</span>.<span style="color: #008b8b;">channels</span>.FileChannel
<span style="color: #228b22;">FileLock</span> <span style="color: #0000ff;">lock</span>();
<span style="color: #228b22;">FileLock</span> <span style="color: #0000ff;">tryLock</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36820;&#22238;&#38145;&#25110;null</span>
<span style="color: #228b22;">FileLock</span> <span style="color: #0000ff;">lock</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">start</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">size</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">shared</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#23545;&#25991;&#20214;&#30340;&#19968;&#37096;&#20998;&#19978;&#38145;&#12290;&#22914;&#26524;&#35201;&#21253;&#21547;&#25991;&#20214;&#23614;&#37096;&#65292;size&#38656;&#35201;&#20256;&#20837;Long.MAX_VALUE</span>
<span style="color: #228b22;">FileLock</span> <span style="color: #0000ff;">tryLock</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">start</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">size</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">shared</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">nio</span>.<span style="color: #008b8b;">channels</span>.FileLock
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">release</span>();
</pre>
</div>

<p>
FileLock是虚拟机级别的并发控制机制。
</p>
</div>
</div>


<div id="outline-container-orge27c836" class="outline-3">
<h3 id="orge27c836">正则表达式</h3>
<div class="outline-text-3" id="text-orge27c836">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">regex</span>.Pattern
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Pattern</span> <span style="color: #0000ff;">compile</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">expression</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Pattern</span> <span style="color: #0000ff;">compile</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">expression</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">flags</span>);
<span style="color: #228b22;">Matcher</span> <span style="color: #0000ff;">matcher</span>(<span style="color: #228b22;">CharSequence</span> <span style="color: #a0522d;">input</span>);
<span style="color: #228b22;">String</span>[] <span style="color: #0000ff;">split</span>(<span style="color: #228b22;">CharSequence</span> <span style="color: #a0522d;">input</span>);
<span style="color: #228b22;">String</span>[] <span style="color: #0000ff;">split</span>(<span style="color: #228b22;">CharSequence</span> <span style="color: #a0522d;">input</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">limit</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">regex</span>.Matcher
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">matches</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">lookingAt</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">find</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">find</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">start</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">start</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">end</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">group</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">groupCount</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">start</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">groupIndex</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">end</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">groupIndex</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">group</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">groupIndex</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">replaceAll</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">replacement</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">replaceFirst</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">replacement</span>);
<span style="color: #228b22;">Matcher</span> <span style="color: #0000ff;">reset</span>();
<span style="color: #228b22;">Matcher</span> <span style="color: #0000ff;">reset</span>(<span style="color: #228b22;">CharSequence</span> <span style="color: #a0522d;">input</span>);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org98bae0e" class="outline-2">
<h2 id="org98bae0e">XML</h2>
<div class="outline-text-2" id="text-org98bae0e">
<p>
可扩展标记语言（eXtensible Markup Language，XML）是用于在程序之间交换数据的结构化文本。下面是一个XML示例：
</p>

<div class="org-src-container">
<pre class="src src-xml"><span style="color: #8b2252;">&lt;?</span><span style="color: #a020f0;">xml</span><span style="color: #8b2252;"> </span><span style="color: #8b2252;">version="1.0" encoding="UTF-8"</span><span style="color: #8b2252;">?&gt;</span>
<span style="color: #8b2252;">&lt;!</span><span style="color: #8b2252;">DOCTYPE web-app PUBLIC</span>
<span style="color: #8b2252;">  "-//Sun Microsystems, Inc.//DTD Web Application 2.2//EN"</span>
<span style="color: #8b2252;">  "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd"&gt;</span>
&lt;<span style="color: #0000ff;">configuration</span>&gt;
  &lt;<span style="color: #0000ff;">title</span>&gt;
    &lt;<span style="color: #0000ff;">font</span>&gt;
      &lt;<span style="color: #0000ff;">name</span>&gt;Helvetica&lt;/<span style="color: #0000ff;">name</span>&gt;
      &lt;<span style="color: #0000ff;">size</span>&gt;36&lt;/<span style="color: #0000ff;">size</span>&gt;
    &lt;/<span style="color: #0000ff;">font</span>&gt;
  &lt;/<span style="color: #0000ff;">title</span>&gt;
&lt;/<span style="color: #0000ff;">configuration</span>&gt;
</pre>
</div>

<p>
!DOCTYPE标签叫做文档类型定义（Document Type Definition，DTD），这个标签是可选的。XML标签可以有子标签和属性。XML和HTML的主要区别在于，HTML是大小写不敏感的；HTML中关闭标签可以省略；HTML的属性可以没有值。一些字符在XML有着特殊含义，如果标签的文本包含这些字符，需要进行转义。转义字符有5个：
</p>
<div class="org-src-container">
<pre class="src src-xml"><span style="color: #008b8b;">&amp;</span><span style="color: #008b8b;">lt</span><span style="color: #008b8b;">;</span>
<span style="color: #008b8b;">&amp;</span><span style="color: #008b8b;">gt</span><span style="color: #008b8b;">;</span>
<span style="color: #008b8b;">&amp;</span><span style="color: #008b8b;">amp</span><span style="color: #008b8b;">;</span>
<span style="color: #008b8b;">&amp;</span><span style="color: #008b8b;">quot</span><span style="color: #008b8b;">;</span>
<span style="color: #008b8b;">&amp;</span><span style="color: #008b8b;">apos</span><span style="color: #008b8b;">;</span>
</pre>
</div>

<p>
转义字符可读性较差，难以理解和维护。因此XML提供了CDATA section。CDATA section通过&lt;![CDATA[和]]&gt;来界定范围。在CDATA section中，不需要对字符进行转义：
</p>
<div class="org-src-container">
<pre class="src src-xml"><span style="color: #8b2252;">&lt;![</span><span style="color: #483d8b;">CDATA</span><span style="color: #8b2252;">[</span><span style="color: #8b2252;">&lt; &amp; &gt; are my favourite delimiters</span><span style="color: #8b2252;">]]&gt;</span>
</pre>
</div>

<p>
XML可以包含注释：
</p>
<div class="org-src-container">
<pre class="src src-xml"><span style="color: #b22222;">&lt;!-- </span><span style="color: #b22222;">comment </span><span style="color: #b22222;">--&gt;</span>
</pre>
</div>
</div>

<div id="outline-container-org9f9838f" class="outline-3">
<h3 id="org9f9838f">DOM</h3>
<div class="outline-text-3" id="text-org9f9838f">
<p>
在Java中处理XML有两种方式：文档对象模型（Document Object Model，DOM）和SAX（Simple API for XML）。DOM将整个XML读入内存，按照树的方式解析并组织文档。SAX则是使用流的方式，在遇到标签生成相应的事件。DOM方式编码简单，但是对于体积较大的XML文档，需要消耗更多的内存和时间。
</p>


<p>
下面首先介绍DOM方法。DOM使用的类定义在org.w3c.dom包中：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">DocumentBuilderFactory</span> <span style="color: #a0522d;">factory</span> = DocumentBuilderFactory.newInstance();
<span style="color: #228b22;">DocumentBuilder</span> <span style="color: #a0522d;">builder</span> = factory.newDocumentBuilder();
<span style="color: #228b22;">File</span> <span style="color: #a0522d;">f</span> = ...;
<span style="color: #228b22;">Document</span> <span style="color: #a0522d;">doc</span> = builder.parse(f);
<span style="color: #228b22;">URL</span> <span style="color: #a0522d;">u</span> = ...;
<span style="color: #228b22;">Document</span> <span style="color: #a0522d;">doc</span> = builder.parse(u);
<span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span> = ...;
<span style="color: #228b22;">Document</span> <span style="color: #a0522d;">doc</span> = builder.parse(in);

<span style="color: #228b22;">Element</span> <span style="color: #a0522d;">root</span> = doc.getDocumentElement();
<span style="color: #228b22;">NodeList</span> <span style="color: #a0522d;">children</span> = root.getChildNodes();
<span style="color: #a020f0;">for</span> (<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = 0; i &lt; children.<span style="color: #228b22;">getLength</span>(); i++) {
    <span style="color: #228b22;">Node</span> <span style="color: #a0522d;">child</span> = children.item(i);
    <span style="color: #a020f0;">if</span> (child <span style="color: #a020f0;">instanceof</span> Element) {
        <span style="color: #228b22;">Element</span> <span style="color: #a0522d;">childElement</span> = (<span style="color: #228b22;">Element</span>) child;
        <span style="color: #228b22;">String</span> <span style="color: #a0522d;">tagName</span> = childElement.getTagName();
        <span style="color: #228b22;">Text</span> <span style="color: #a0522d;">textNode</span> = (<span style="color: #228b22;">Text</span>) childElement.getFirstChild();
        <span style="color: #228b22;">String</span> <span style="color: #a0522d;">text</span> = textNode.getData().trim();
        <span style="color: #228b22;">NamedNodeMap</span> <span style="color: #a0522d;">attrs</span> = childElement.getAttributes();
        <span style="color: #228b22;">String</span> <span style="color: #a0522d;">foo</span> = childElement.getAttribute(<span style="color: #8b2252;">"foo"</span>);
    }
}
</pre>
</div>

<p>
遍历子元素也可以使用：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">for</span> (<span style="color: #228b22;">Node</span> <span style="color: #a0522d;">childNode</span> = parent.getFirstchild(); 
    childNode != <span style="color: #008b8b;">null</span>; 
    childNode = childNode.getNextSibling()) {
    ...
}
</pre>
</div>
</div>
</div>


<div id="outline-container-org41d58e1" class="outline-3">
<h3 id="org41d58e1">验证XML</h3>
<div class="outline-text-3" id="text-org41d58e1">
<p>
XML非常灵活，但是缺少对约束的检查。DTD和XML Schema可以补足这一点。首先来看DTD如和嵌入到XML中：
</p>
<div class="org-src-container">
<pre class="src src-xml"><span style="color: #8b2252;">&lt;?</span><span style="color: #a020f0;">xml</span><span style="color: #8b2252;"> </span><span style="color: #8b2252;">version="1.0"</span><span style="color: #8b2252;">?&gt;</span>
<span style="color: #8b2252;">&lt;!</span><span style="color: #8b2252;">DOCTYPE configuration [</span>
<span style="color: #8b2252;">   </span><span style="color: #8b2252;">&lt;!</span><span style="color: #8b2252;">ELEMENT configuration ...&gt;</span>
   ...
]&gt;
&lt;<span style="color: #0000ff;">configuration</span>&gt;
   ...
&lt;/<span style="color: #0000ff;">configuration</span>&gt;

<span style="color: #8b2252;">&lt;!</span><span style="color: #8b2252;">DOCTYPE configuration SYSTEM "config.dtd"&gt;</span>
<span style="color: #8b2252;">&lt;!</span><span style="color: #8b2252;">DOCTYPE configuration SYSTEM "http://myserver.com/config.dtd"&gt;</span>
</pre>
</div>

<p>
下面这个DTD要去font标签包含name和size两个标签，并要去name和size是文本：
</p>
<div class="org-src-container">
<pre class="src src-xml"><span style="color: #8b2252;">&lt;!</span><span style="color: #8b2252;">ELEMENT font (name,size)&gt;</span>
<span style="color: #8b2252;">&lt;!</span><span style="color: #8b2252;">ELEMENT name (#PCDATA)&gt;</span>
<span style="color: #8b2252;">&lt;!</span><span style="color: #8b2252;">ELEMENT size (#PCDATA)&gt;</span>
</pre>
</div>

<p>
接着介绍XML Schema。下面是一个示例：
</p>
<div class="org-src-container">
<pre class="src src-xml"><span style="color: #8b2252;">&lt;?</span><span style="color: #a020f0;">xml</span><span style="color: #8b2252;"> </span><span style="color: #8b2252;">version="1.0"</span><span style="color: #8b2252;">?&gt;</span>
&lt;<span style="color: #0000ff;">configuration</span> <span style="color: #483d8b;">xmlns</span>:<span style="color: #a0522d;">xsi</span>=<span style="color: #8b2252;">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span style="color: #483d8b;">xsi</span>:<span style="color: #a0522d;">noNamespaceSchemaLocation</span>=<span style="color: #8b2252;">"config.xsd"</span>&gt;
...
&lt;/<span style="color: #0000ff;">configuration</span>&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-xsd">&lt;xsd:simpleType name="StyleType"&gt;
    &lt;xsd:restriction base="xsd:string"&gt;
        &lt;xsd:enumeration value="PLAIN" /&gt;
        &lt;xsd:enumeration value="BOLD" /&gt;
        &lt;xsd:enumeration value="ITALIC" /&gt;
        &lt;xsd:enumeration value="BOLD_ITALIC" /&gt;
    &lt;/xsd:restriction&gt;
&lt;/xsd:simpleType&gt;

&lt;xsd:element name="name" type="xsd:string" /&gt;
&lt;xsd:element name="size" type="xsd:int" /&gt;
&lt;xsd:element name="style" type="StyleType" /&gt;

&lt;xsd:complexType name="FontType"&gt;
    &lt;xsd:sequence&gt;
        &lt;xsd:element ref="name" /&gt;
        &lt;xsd:element ref="size" /&gt;
        &lt;xsd:element ref="style" /&gt;
    &lt;/xsd:sequence&gt;
&lt;/xsd:complexType&gt;
</pre>
</div>

<p>
如果只需要访问XML文档中的一段特定信息，可以使用XPath。比如在下面的XML中，XPath表达式/configuration/database/username可以得到username的值：
</p>
<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #0000ff;">configuration</span>&gt;
    &lt;<span style="color: #0000ff;">database</span>&gt;
        &lt;<span style="color: #0000ff;">username</span>&gt;dbuser&lt;/<span style="color: #0000ff;">username</span>&gt;
        &lt;<span style="color: #0000ff;">password</span>&gt;secret&lt;/<span style="color: #0000ff;">password</span>&gt;
    &lt;/<span style="color: #0000ff;">database</span>&gt;
&lt;/<span style="color: #0000ff;">configuration</span>&gt;
</pre>
</div>

<p>
XPath支持多个元素和属性：
</p>
<div class="org-src-container">
<pre class="src src-xpath">/gridbag/row[1]/cell[1]/@anchor
</pre>
</div>

<p>
Java提供的XPath方法有：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">xml</span>.<span style="color: #008b8b;">xpath</span>.XPathFactory
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">XPathFactory</span> <span style="color: #0000ff;">newInstance</span>();
<span style="color: #228b22;">XPath</span> <span style="color: #0000ff;">newXpath</span>();

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">xml</span>.<span style="color: #008b8b;">xpath</span>.XPath
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">evaluate</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">expression</span>, <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">startingPoint</span>);
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">evaluate</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">expression</span>, <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">startingPoint</span>, <span style="color: #228b22;">QName</span> <span style="color: #a0522d;">resultType</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-org4015196" class="outline-3">
<h3 id="org4015196">SAX</h3>
<div class="outline-text-3" id="text-org4015196">
<p>
SAX以流的方式解析XML，并以事件报告。SAX不会存储DOM。Java提供的方法有：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">xml</span>.<span style="color: #008b8b;">parsers</span>.SAXParserFactory
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">SAXParserFactory</span> <span style="color: #0000ff;">newInstance</span>();
<span style="color: #228b22;">SAXParser</span> <span style="color: #0000ff;">newSAXParser</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isNamespaceAware</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setNamespaceAware</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">value</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isValidating</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setValidating</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">value</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">xml</span>.<span style="color: #008b8b;">parsers</span>.SAXParser
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">parse</span>(<span style="color: #228b22;">File</span> <span style="color: #a0522d;">f</span>, <span style="color: #228b22;">DefaultHandler</span> <span style="color: #a0522d;">handler</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35299;&#26512;XML&#25991;&#26723;&#65292;&#23558;&#20107;&#20214;&#25253;&#21578;&#32473;handler</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">parse</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>, <span style="color: #228b22;">DefaultHandler</span> <span style="color: #a0522d;">handler</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35299;&#26512;XML&#25991;&#26723;&#65292;&#23558;&#20107;&#20214;&#25253;&#21578;&#32473;handler</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">parse</span>(<span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span>, <span style="color: #228b22;">DefaultHandler</span> <span style="color: #a0522d;">handler</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35299;&#26512;XML&#25991;&#26723;&#65292;&#23558;&#20107;&#20214;&#25253;&#21578;&#32473;handler</span>

<span style="color: #008b8b;">org</span>.<span style="color: #008b8b;">xml</span>.<span style="color: #008b8b;">sax</span>.ContentHandler
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">startDocument</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">endDocument</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">startElement</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">uri</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">lname</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">qname</span>, <span style="color: #228b22;">Attributes</span> <span style="color: #a0522d;">attr</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">endElement</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">uri</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">lname</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">qname</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">characters</span>(<span style="color: #228b22;">char</span>[] <span style="color: #a0522d;">data</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">start</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">length</span>);

<span style="color: #008b8b;">org</span>.<span style="color: #008b8b;">xml</span>.<span style="color: #008b8b;">sax</span>.Attributes
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getLength</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getLocalName</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getURI</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getQName</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getValue</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getValue</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">qname</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getValue</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">uri</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
</pre>
</div>

<p>
Java还提供了一种StAX的方式：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">xml</span>.<span style="color: #008b8b;">stream</span>.XMLInputFactory
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">XMLInputFactory</span> <span style="color: #0000ff;">newInstance</span>();
<span style="color: #228b22;">XMLStreamReader</span> <span style="color: #0000ff;">createXMLStreamReader</span>(<span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">xml</span>.<span style="color: #008b8b;">stream</span>.XMLStreamReader
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">hasNext</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">next</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isStartElement</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isEndElement</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isCharacters</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isWhiteSpace</span>();
<span style="color: #228b22;">QName</span> <span style="color: #0000ff;">getName</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getLocalName</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getText</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getAttributeCount</span>();
<span style="color: #228b22;">QName</span> <span style="color: #0000ff;">getAttributeName</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getAttributeLocalName</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getAttributeValue</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>);
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-orge800209" class="outline-2">
<h2 id="orge800209">网络</h2>
<div class="outline-text-2" id="text-orge800209">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.<span style="color: #228b22;">Socket</span>
<span style="color: #0000ff;">Socket</span>();
Socket(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">host</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">port</span>);
<span style="color: #228b22;">InputStream</span> <span style="color: #0000ff;">getInputStream</span>();
<span style="color: #228b22;">OutputStream</span> <span style="color: #0000ff;">getOutputStream</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setSoTimeout</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">ms</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">connect</span>(<span style="color: #228b22;">SocketAddress</span> <span style="color: #a0522d;">addr</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">connect</span>(<span style="color: #228b22;">SocketAddress</span> <span style="color: #a0522d;">addr</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">timeoutMilliseconds</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isConnected</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isClosed</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">shutdownOutput</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">shutdownInput</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isOutputShutdown</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isInputShutdown</span>();
</pre>
</div>


<p>
InetAddress类封装了因特网地址：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.InetAddress
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Inetaddress</span> <span style="color: #0000ff;">getByName</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">host</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">InetAddress</span>[] <span style="color: #0000ff;">getAllByName</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">host</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">InetAddress</span> <span style="color: #0000ff;">getLocalHost</span>();
<span style="color: #228b22;">byte</span>[] <span style="color: #0000ff;">getAddress</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getHostAddress</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getHostName</span>();
</pre>
</div>

<p>
对于服务器，Java提供了ServerSocket类：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.<span style="color: #228b22;">ServerSocket</span>
<span style="color: #0000ff;">ServerSocket</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">port</span>);
<span style="color: #228b22;">Socket</span> <span style="color: #0000ff;">accept</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">close</span>();
</pre>
</div>

<p>
Socket不能中断。因此Java提供了SocketChannel：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.<span style="color: #228b22;">InetSocketAddress</span>
<span style="color: #0000ff;">InetSocketAddress</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">hostname</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">port</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isUnresolved</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">nio</span>.<span style="color: #008b8b;">channels</span>.SocketChannel
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">SocketChannel</span> <span style="color: #0000ff;">open</span>(<span style="color: #228b22;">SocketAddress</span> <span style="color: #a0522d;">address</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">nio</span>.<span style="color: #008b8b;">channels</span>.Channels
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">InputStream</span> <span style="color: #0000ff;">newInputStream</span>(<span style="color: #228b22;">ReadableByteChannel</span> <span style="color: #a0522d;">channel</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">OutputStream</span> <span style="color: #0000ff;">newOutputStream</span>(<span style="color: #228b22;">WritableByteChannel</span> <span style="color: #a0522d;">channel</span>);
</pre>
</div>

<p>
为了支持Web，Java提供了URL和URLConnection类：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.URL
<span style="color: #228b22;">InputStream</span> <span style="color: #0000ff;">openStream</span>();
<span style="color: #228b22;">URLConnection</span> <span style="color: #0000ff;">openConnection</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.URLConnection
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setDoInput</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">doInput</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">getDoInput</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setDoOutput</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">doOutput</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">getDoOutput</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setIfModifiedSince</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>);
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">getIfModifiedSince</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setUseCaches</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">useCaches</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">connect</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getContentLength</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getContentType</span>();
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">getDate</span>();
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">getExpiration</span>();
<span style="color: #228b22;">InputStream</span> <span style="color: #0000ff;">getInputStream</span>();
<span style="color: #228b22;">OutputStream</span> <span style="color: #0000ff;">getOutputStream</span>();
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.HttpURLConnection
<span style="color: #228b22;">InputStream</span> <span style="color: #0000ff;">getErrorStream</span>()

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.URLEncoder
<span style="color: #a020f0;">static</span> String encode(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">encode</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.URLDecoder
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">String</span> <span style="color: #0000ff;">encode</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">encoding</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfa440c9" class="outline-2">
<h2 id="orgfa440c9">数据库编程</h2>
<div class="outline-text-2" id="text-orgfa440c9">
<p>
加载驱动器类：
</p>
<div class="org-src-container">
<pre class="src src-java">Class.forName(<span style="color: #8b2252;">"org.postgresql.Driver"</span>);
</pre>
</div>

<p>
或：
</p>
<div class="org-src-container">
<pre class="src src-java">java -Djdbc.drivers=<span style="color: #008b8b;">org</span>.<span style="color: #008b8b;">postgresql</span>.Driver:<span style="color: #008b8b;">org</span>.<span style="color: #008b8b;">apache</span>.<span style="color: #008b8b;">derby</span>.<span style="color: #008b8b;">jdbc</span>.ClientDriver ProgramName
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.DriverManager
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Connection</span> <span style="color: #0000ff;">getConnection</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">url</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">user</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">password</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Connection
<span style="color: #228b22;">Statement</span> <span style="color: #0000ff;">createStatement</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">close</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Statement
<span style="color: #228b22;">ResultSet</span> <span style="color: #0000ff;">executeQuery</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">sql</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">executeUpdate</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">sql</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">execute</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">sql</span>);
<span style="color: #228b22;">Result</span> <span style="color: #0000ff;">getResultSet</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getUpdateCount</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">close</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isClosed</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.ResultSet
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">next</span>();
<span style="color: #228b22;">XXX</span> <span style="color: #0000ff;">getXXX</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">column</span>);  <span style="color: #b22222;">// </span><span style="color: #b22222;">XXX&#21487;&#20197;&#26159;int&#12289;double&#12289;string&#12289;date&#31561;&#12290;</span>
<span style="color: #228b22;">XXX</span> <span style="color: #0000ff;">getXXX</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">column</span>); 
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">findColumn</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">close</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isClosed</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.SQLException
<span style="color: #228b22;">SQLException</span> <span style="color: #0000ff;">getNextException</span>();
<span style="color: #228b22;">Iterator</span>&lt;<span style="color: #228b22;">Throwable</span>&gt; <span style="color: #0000ff;">iterator</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getSQLState</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getErrorCode</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Warning
<span style="color: #228b22;">SQLWarning</span> <span style="color: #0000ff;">getNextWarning</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Connection
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Statement
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.ResultSet
<span style="color: #228b22;">SQLWarning</span> <span style="color: #0000ff;">getWarnings</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.DataTruncation
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">getParameter</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getIndex</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getDataSize</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getTransferSize</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Connection
<span style="color: #228b22;">PreparedStatement</span> <span style="color: #0000ff;">prepareStatement</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">sql</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.PreparedStatement
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setXXX</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">n</span>, <span style="color: #228b22;">XXX</span> <span style="color: #a0522d;">x</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">clearPatameters</span>();
<span style="color: #228b22;">ResultSet</span> <span style="color: #0000ff;">executeQuery</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">executeUpdate</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.ResultSet
<span style="color: #228b22;">Blob</span> <span style="color: #0000ff;">getBlob</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">column</span>);
<span style="color: #228b22;">Blob</span> <span style="color: #0000ff;">getBlob</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #228b22;">Clob</span> <span style="color: #0000ff;">getClob</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">column</span>);
<span style="color: #228b22;">Clob</span> <span style="color: #0000ff;">getClob</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Blob
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">length</span>();
<span style="color: #228b22;">byte</span>[] <span style="color: #0000ff;">getBytes</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">start</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">length</span>);
<span style="color: #228b22;">InputStream</span> <span style="color: #0000ff;">getBinaryStream</span>();
<span style="color: #228b22;">InputStream</span> <span style="color: #0000ff;">getBinaryStream</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">start</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">length</span>);
<span style="color: #228b22;">OutputStream</span> <span style="color: #0000ff;">setBinaryStream</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">start</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Clob
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">length</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getSubString</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">start</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">length</span>);
<span style="color: #228b22;">Reader</span> <span style="color: #0000ff;">getCharacterStream</span>();
<span style="color: #228b22;">Reader</span> <span style="color: #0000ff;">getCharacterStream</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">start</span>);
<span style="color: #228b22;">Reader</span> <span style="color: #0000ff;">getCharacterStream</span>(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">start</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">length</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Connection
<span style="color: #228b22;">Blob</span> <span style="color: #0000ff;">createBlob</span>();
<span style="color: #228b22;">Clob</span> <span style="color: #0000ff;">createClob</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Statement
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">getMoreResults</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Statement
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">execute</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">statement</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">autogenerated</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">executeUpdate</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">statement</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">autogenerated</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#22914;&#26524;autogenerated&#26159;Statement.RETURN_GENERATED_KEYS&#65292;&#24182;&#19988;&#31532;&#19968;&#20010;&#35821;&#21477;&#26159;INSERT&#65292;&#31532;&#19968;&#21015;&#26159;&#33258;&#21160;&#29983;&#25104;&#30340;&#38190;&#12290;</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">getAutoCommit</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setAutoCommit</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">commit</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">rollback</span>();
<span style="color: #228b22;">Savepoint</span> <span style="color: #0000ff;">setSavepoint</span>();
<span style="color: #228b22;">Savepoint</span> <span style="color: #0000ff;">setSavepoint</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">rollback</span>(<span style="color: #228b22;">Savepoint</span> <span style="color: #a0522d;">svpt</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">releaseSavepoint</span>(<span style="color: #228b22;">Savepoint</span> <span style="color: #a0522d;">svpt</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Savepoint
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getSavepointId</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getSavepointName</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.Statement
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">addBatch</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">command</span>);
<span style="color: #228b22;">int</span>[] <span style="color: #0000ff;">executeBatch</span>();
</pre>
</div>
</div>
</div>

<div id="outline-container-org8b19878" class="outline-2">
<h2 id="org8b19878">国际化</h2>
<div class="outline-text-2" id="text-org8b19878">
<p>
国家代码由ISO-3166-1定义，如中国为CN。语言代码由ISO-639-1定义，如中文为zh。Java内置了大量Locale对象，如Locale.CHINA和Locale.CHINESE。这两个的区别在于，后者只设置了语言，没有设置数值和日期的显示特性。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Locale</span>
<span style="color: #0000ff;">Locale</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">language</span>);
Locale(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">language</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">country</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Locale</span> <span style="color: #0000ff;">getDefault</span>();
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">setDefault</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">loc</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getDisplayName</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getDisplayName</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">loc</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getLanguage</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getDisplayLanguage</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getDisplayLanguage</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">loc</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getCountry</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getDisplayCountry</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getDisplayCountry</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">loc</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">text</span>.NumberFormat
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">NumberFormat</span> <span style="color: #0000ff;">getNumberInstance</span>();
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">NumberFormat</span> <span style="color: #0000ff;">getNumberInstance</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">l</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">NumberFormat</span> <span style="color: #0000ff;">getCurrencyInstance</span>();
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">NumberFormat</span> <span style="color: #0000ff;">getCurrencyInstance</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">l</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">NumberFormat</span> <span style="color: #0000ff;">getPercentInstance</span>();
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">NumberFormat</span> <span style="color: #0000ff;">getPercentInstance</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">l</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">format</span>(<span style="color: #228b22;">double</span> <span style="color: #a0522d;">x</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">format</span>(<span style="color: #228b22;">float</span> <span style="color: #a0522d;">x</span>);
<span style="color: #228b22;">Number</span> <span style="color: #0000ff;">parse</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setGroupingUsed</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isGroupingUsed</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20998;&#38548;&#31526;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setMinimumFactionDigits</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">n</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getMinimumFactionDigits</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setMaximumFactionDigits</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">n</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getMaximumFactionDigits</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.Currency
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Currency</span> <span style="color: #0000ff;">getInstance</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">code</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Currency</span> <span style="color: #0000ff;">getInstance</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">locale</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getCurrencyCode</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getSymbol</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getSymbol</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">l</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getDefaultFractionDigits</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">text</span>.DateFormat
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">DateFormat</span> <span style="color: #0000ff;">getDateInstance</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">dateStyle</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">DEFAULT FULL LONG MEDIUM SHORT</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">DateFormat</span> <span style="color: #0000ff;">getDateInstance</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">dateStyle</span>, <span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">l</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">DateFormat</span> <span style="color: #0000ff;">getTimeInstance</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">timeStyle</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">DateFormat</span> <span style="color: #0000ff;">getTimeInstance</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">timeStyle</span>, <span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">l</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">DateFormat</span> <span style="color: #0000ff;">getDateTimeInstance</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">dateStyle</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">timeStyle</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">DateFormat</span> <span style="color: #0000ff;">getDateTimeInstance</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">dateStyle</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">timeStyle</span>, <span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">l</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">format</span>(<span style="color: #228b22;">Date</span> <span style="color: #a0522d;">d</span>);
<span style="color: #228b22;">Date</span> <span style="color: #0000ff;">parse</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setLenient</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isLenient</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setCalendar</span>(<span style="color: #228b22;">Calendar</span> <span style="color: #a0522d;">cal</span>);
<span style="color: #228b22;">Calendar</span> <span style="color: #0000ff;">getCalendar</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setTimeZone</span>(<span style="color: #228b22;">TimeZone</span> <span style="color: #a0522d;">tz</span>);
<span style="color: #228b22;">TimeZone</span> <span style="color: #0000ff;">getTimeZone</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setNumberFormat</span>(<span style="color: #228b22;">NumberFormat</span> <span style="color: #a0522d;">t</span>);
<span style="color: #228b22;">NumberFormat</span> <span style="color: #0000ff;">getNumberFormat</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.TimeZone
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">TimeZone</span> <span style="color: #0000ff;">getDefault</span>();
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">TimeZone</span> <span style="color: #0000ff;">getTimeZone</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">timeZoneId</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getID</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getDisplayName</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getDisplayName</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">l</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getDisplayName</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">daylight</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">style</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getDisplayName</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">daylight</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">style</span>, <span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">locale</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">useDaylightTime</span>();
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">inDaylightTime</span>(<span style="color: #228b22;">Date</span> <span style="color: #a0522d;">date</span>);
</pre>
</div>
</div>

<div id="outline-container-org283d0da" class="outline-3">
<h3 id="org283d0da">字符排序</h3>
<div class="outline-text-3" id="text-org283d0da">
<p>
字符的差别可以分为首要（primary）、次要（secondary）和再次（tertiary）。“A”和“Z”的差别是首要的，“A”和“a”的差别是再次的。次要差别用于西欧字母和英文字母的差别。在首要强度下，“Able”和“able”是相等的。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">text</span>.Collator
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Collator</span> <span style="color: #0000ff;">getInstance</span>();
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Collator</span> <span style="color: #0000ff;">getInstance</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">l</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">compare</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">equals</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">b</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setStrength</span>(); <span style="color: #b22222;">// </span><span style="color: #b22222;">Collator.PRIMARY SECONDARY TERTIARY</span>
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getStrength</span>();
</pre>
</div>

<p>
java提供了MessageFormat来对消息进行格式化：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">text</span>.<span style="color: #228b22;">MessageFormat</span>
<span style="color: #0000ff;">MessageFormat</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">pattern</span>);
MessageFormat(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">pattern</span>, <span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">loc</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">applyPattern</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">pattern</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">"Hello, {0}, today is {1}."</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setLocale</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">loc</span>);
<span style="color: #228b22;">Locale</span> <span style="color: #0000ff;">getLocale</span>();
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">String</span> <span style="color: #0000ff;">format</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">pattern</span>, <span style="color: #228b22;">Object</span>... <span style="color: #a0522d;">args</span>);
<span style="color: #228b22;">StringBuffer</span> <span style="color: #0000ff;">format</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">args</span>, <span style="color: #228b22;">StringBuffer</span> <span style="color: #a0522d;">result</span>, <span style="color: #228b22;">FieldPosition</span> <span style="color: #a0522d;">pos</span>);
</pre>
</div>

<p>
对于写入文件的编码，可以在创建FileWriter时指定：
</p>
<div class="org-src-container">
<pre class="src src-java">out = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">FileWrite</span>(filename, <span style="color: #8b2252;">"ISO-8859-1"</span>);
</pre>
</div>

<p>
资源的命名要采用 包名<sub>语言</sub><sub>国家</sub> 或 包名<sub>语言</sub> 的格式。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.ResourceBundle
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">ResourceBundle</span> <span style="color: #0000ff;">getBundle</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">baseName</span>, <span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">loc</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">ResourceBundle</span> <span style="color: #0000ff;">getBundle</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">baseName</span>);
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getString</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #228b22;">String</span>[] <span style="color: #0000ff;">getStringArray</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcaa29c0" class="outline-2">
<h2 id="orgcaa29c0">安全</h2>
<div class="outline-text-2" id="text-orgcaa29c0">
<p>
当执行程序
</p>
<div class="org-src-container">
<pre class="src src-shell">java MyProgram
</pre>
</div>
<p>
时，Java虚拟机会加载MyProgram.class文件，检查MyProgram类的域和基类，加载这些类，然后执行MyProgram.main()方法。一个Java程序有3种类型的加载器：引导类加载器、扩展类加载器和系统类加载器。引导类加载器负责加载系统类，如rt.jar。这是虚拟机的第一部分，通常由C语言开发。引导类加载器没有ClassLoader，下面的语句将返回null：
</p>
<div class="org-src-container">
<pre class="src src-java">String.<span style="color: #a020f0;">class</span>.getClassLoader();
</pre>
</div>

<p>
扩展类加载器从lib/ext目录加载标准扩展类。系统类加载器从classpath中加载类。加载器组成一个树状结构，出引导类加载器外，每个加载器具有一个父加载器。在加载类时，首先由父加载器尝试加载。
</p>


<p>
每个线程都会引用一个类加载器，叫做上下文类加载器：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">Thread</span> <span style="color: #a0522d;">t</span> = Thread.currentThread();
<span style="color: #228b22;">ClassLoader</span> <span style="color: #a0522d;">loader</span> = t.getContextClassLoader();
<span style="color: #228b22;">Class</span> <span style="color: #a0522d;">cl</span> = loader.loadClass(className);

t.setContextClassLoader(newLoader);
</pre>
</div>
<p>
主线程的上下文类加载器是系统类加载器。
</p>

<p>
在JVM中唯一确定一个类，不仅需要包名和类名，还需要考虑类加载器。类加载器同时承担了名字空间的作用。在JVM里，两个包名和类名都相同的类，只要在不同的类加载器中，是可以共存的。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Class
<span style="color: #228b22;">ClassLoader</span> <span style="color: #0000ff;">getClassLoader</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.ClassLoader
<span style="color: #228b22;">ClassLoader</span> <span style="color: #0000ff;">getParent</span>();
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">ClassLoader</span> <span style="color: #0000ff;">getSystemClassLoader</span>();
<span style="color: #a020f0;">protected</span> <span style="color: #228b22;">Class</span> <span style="color: #0000ff;">findClass</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #228b22;">Class</span> <span style="color: #0000ff;">defineClass</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">byteCodeData</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">offset</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">length</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">net</span>.<span style="color: #228b22;">URLClassLoader</span>
<span style="color: #0000ff;">URLClassLoader</span>(<span style="color: #228b22;">URL</span>[] <span style="color: #a0522d;">urls</span>);
URLClassLoader(<span style="color: #228b22;">URL</span>[] <span style="color: #a0522d;">urls</span>, <span style="color: #228b22;">ClassLoader</span> <span style="color: #a0522d;">parent</span>);

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Thread
<span style="color: #228b22;">ClassLoader</span> <span style="color: #0000ff;">getContextClassLoader</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setContextClassLoader</span>(<span style="color: #228b22;">ClassLoader</span> <span style="color: #a0522d;">loader</span>);
</pre>
</div>

<p>
在加载类的时候，java会对字节码进行校验，校验不通过的类将被拒绝加载。命令行参数noverify可以关闭校验。
</p>
<div class="org-src-container">
<pre class="src src-java">java -noverify Hello
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">security</span>.MessageDigest
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">MessageDigest</span> <span style="color: #0000ff;">getInstance</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">algorithmName</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">update</span>(<span style="color: #228b22;">byte</span> <span style="color: #a0522d;">input</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">update</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">input</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">update</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">input</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">offset</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">len</span>);
<span style="color: #228b22;">byte</span>[] <span style="color: #0000ff;">digest</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">reset</span>();
</pre>
</div>

<p>
X.509是一种通用的签名证书格式，其结构由ASN.1（Abstract Syntax Notation）定义。
</p>

<p>
java提供了程序keytool来管理签名和证书。keytool使用X.500规定的区分式名字，包括常用名CN、机构单位OU、机构O、地点L、州ST和国别C。
</p>

<p>
创建密钥库：
</p>
<div class="org-src-container">
<pre class="src src-shell">keytool -genkeypair -keystore alice.certs -alias alice
</pre>
</div>

<p>
导出证书：
</p>
<div class="org-src-container">
<pre class="src src-shell">keytool -exportcert -keystore alice.certs -alias alice -file alice.cer
</pre>
</div>

<p>
打印证书信息：
</p>
<div class="org-src-container">
<pre class="src src-shell">keytool -printcert -file alice.cer
</pre>
</div>

<p>
jre带了一个密钥库，保存在lib/security/cacerts，口令是changeit：
</p>
<div class="org-src-container">
<pre class="src src-shell">keytool -list -v -keystore jre/lib/security/cacerts
</pre>
</div>

<p>
导入签名：
</p>
<div class="org-src-container">
<pre class="src src-shell">keytool -importcert -keystore bob.certs -alias alice -file alice.cer
</pre>
</div>

<p>
签名文件：
</p>
<div class="org-src-container">
<pre class="src src-shell">jarsigner -keystore alice.certs document.jar alice
</pre>
</div>

<p>
校验签名：
</p>
<div class="org-src-container">
<pre class="src src-shell">jarsigner -verify -keystore bob.certs document.jar
</pre>
</div>
</div>

<div id="outline-container-org3c820ab" class="outline-3">
<h3 id="org3c820ab">加密</h3>
<div class="outline-text-3" id="text-org3c820ab">
<p>
在加密是要使用SecureRandom生产随机数。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">crypto</span>.Cipher
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Cipher</span> <span style="color: #0000ff;">getInstance</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">algorithmName</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Cipher</span> <span style="color: #0000ff;">getInstance</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">algorithmName</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">providerName</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getBlockSize</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">getOutputSize</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">inputLength</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">init</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">mode</span>, <span style="color: #228b22;">Key</span> <span style="color: #a0522d;">key</span>);
<span style="color: #228b22;">byte</span>[] <span style="color: #0000ff;">update</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">in</span>);
<span style="color: #228b22;">byte</span>[] <span style="color: #0000ff;">update</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">in</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">offset</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">length</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">update</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">in</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">offset</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">length</span>, <span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">out</span>);
<span style="color: #228b22;">byte</span>[] <span style="color: #0000ff;">doFinal</span>();
<span style="color: #228b22;">byte</span>[] <span style="color: #0000ff;">doFinal</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">in</span>);
<span style="color: #228b22;">byte</span>[] <span style="color: #0000ff;">doFinal</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">in</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">offset</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">length</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">doFinal</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">in</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">offset</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">length</span>, <span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">out</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">crypto</span>.KeyGenerator
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">KeyGenerator</span> <span style="color: #0000ff;">getInstance</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">algorithmName</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">init</span>(<span style="color: #228b22;">SecureRandom</span> <span style="color: #a0522d;">random</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">init</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">keySize</span>, <span style="color: #228b22;">SecureRandom</span> <span style="color: #a0522d;">random</span>);
<span style="color: #228b22;">SecretKey</span> <span style="color: #0000ff;">generateKey</span>();

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">crypto</span>.SecretKeyFactory
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">SecretKeyFactory</span> <span style="color: #0000ff;">getInstance</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">algorithmName</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">SecretKeyFactory</span> <span style="color: #0000ff;">getInstance</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">algorithmName</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">providerName</span>);
<span style="color: #228b22;">SecretKey</span> <span style="color: #0000ff;">generateSecret</span>(<span style="color: #228b22;">KeySpec</span> <span style="color: #a0522d;">spec</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">crypto</span>.<span style="color: #008b8b;">spec</span>.<span style="color: #228b22;">SecretKeySpec</span>
<span style="color: #0000ff;">SecretKeySpec</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">algorithmName</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">crypto</span>.<span style="color: #228b22;">CipherInputStream</span>
<span style="color: #0000ff;">CipherInputStream</span>(<span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span>, <span style="color: #228b22;">Cipher</span> <span style="color: #a0522d;">cipher</span>);
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">read</span>();
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">read</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">b</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">off</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">len</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">crypto</span>.<span style="color: #228b22;">CipherOutputStream</span>
<span style="color: #0000ff;">CipherOutputStream</span>(<span style="color: #228b22;">OutputStream</span> <span style="color: #a0522d;">out</span>, <span style="color: #228b22;">Cipher</span> <span style="color: #a0522d;">cipher</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">write</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">ch</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">write</span>(<span style="color: #228b22;">byte</span>[] <span style="color: #a0522d;">b</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">off</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">len</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">flush</span>();
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-orga311721" class="outline-2">
<h2 id="orga311721">分布式对象</h2>
<div class="outline-text-2" id="text-orga311721">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">naming</span>.<span style="color: #228b22;">InitialContext</span>
<span style="color: #0000ff;">InitialContext</span>()

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">naming</span>.Context
<span style="color: #a020f0;">static</span> Object lookup(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">bind</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">object</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">unbind</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">rebind</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">object</span>);
<span style="color: #228b22;">NamingEnumeration</span>&lt;<span style="color: #228b22;">NameClassPair</span>&gt; <span style="color: #0000ff;">list</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">naming</span>.NameClassPair
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getName</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getClassName</span>();

<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">rmi</span>.Naming
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Remote</span> <span style="color: #0000ff;">lookup</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">url</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">bind</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">Remote</span> <span style="color: #a0522d;">object</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">unbind</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">rebind</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">Remote</span> <span style="color: #a0522d;">object</span>);
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">String</span>[] <span style="color: #0000ff;">list</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">url</span>);
</pre>
</div>
</div>
</div>


<div id="outline-container-org20b6274" class="outline-2">
<h2 id="org20b6274">脚本、编译与注解处理</h2>
<div class="outline-text-2" id="text-org20b6274">
<p>
Java内置了一个JavaScript引擎，名字叫做Rhino：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #228b22;">ScriptEngine</span> <span style="color: #a0522d;">engine</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">ScriptEngineManager</span>().getEngineByName(<span style="color: #8b2252;">"js"</span>);

engine.eval(<span style="color: #8b2252;">"n = 1"</span>);
<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">result</span> = engine.eval(<span style="color: #8b2252;">"n + 1"</span>);
System.out.println(result);

engine.invokeFunction(<span style="color: #8b2252;">"add"</span>, 1, 2);
engine.invokeMethod(scriptProxy, <span style="color: #8b2252;">"mul"</span>, 1, 2);
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">script</span>.ScriptEngineManager
<span style="color: #228b22;">List</span>&lt;<span style="color: #228b22;">ScriptEngineFactory</span>&gt; <span style="color: #0000ff;">getEngineFactories</span>();
<span style="color: #228b22;">ScriptEngine</span> <span style="color: #0000ff;">getEngineByName</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">js&#12289;rhino&#12289;JavaScript&#12289;javascript&#12289;ECMAScript&#12289;emacscipt</span>
<span style="color: #228b22;">ScriptEngine</span> <span style="color: #0000ff;">getEngineByExtension</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">ext</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">js</span>
<span style="color: #228b22;">ScriptEngine</span> <span style="color: #0000ff;">getEngineByMimeType</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">t</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">application/javascript</span>
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">get</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">key</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">put</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">value</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35774;&#32622;&#20840;&#23616;&#32465;&#23450;</span>

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">script</span>.ScriptEngine
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">eval</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">script</span>);
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">eval</span>(<span style="color: #228b22;">Reader</span> <span style="color: #a0522d;">reader</span>);
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">eval</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">script</span>, <span style="color: #228b22;">Bindings</span> <span style="color: #a0522d;">bindings</span>);
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">eval</span>(<span style="color: #228b22;">Reader</span> <span style="color: #a0522d;">reader</span>, <span style="color: #228b22;">Bindings</span> <span style="color: #a0522d;">bindings</span>);
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">get</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">key</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">put</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">value</span>);
<span style="color: #228b22;">Bindings</span> <span style="color: #0000ff;">createBindings</span>();
<span style="color: #228b22;">ScriptContext</span> <span style="color: #0000ff;">getContext</span>();

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">script</span>.Bindings
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">get</span>(<span style="color: #228b22;">Stirng</span> <span style="color: #a0522d;">key</span>);
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">put</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">value</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">script</span>.ScriptContext
<span style="color: #228b22;">Reader</span> <span style="color: #0000ff;">getReader</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setReader</span>(<span style="color: #228b22;">Reader</span> <span style="color: #a0522d;">reader</span>);
<span style="color: #228b22;">Writer</span> <span style="color: #0000ff;">getWriter</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setWriter</span>(<span style="color: #228b22;">Writer</span> <span style="color: #a0522d;">writer</span>);
<span style="color: #228b22;">Writer</span> <span style="color: #0000ff;">getErrorWriter</span>();
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setErrorWriter</span>(<span style="color: #228b22;">Writer</span> <span style="color: #a0522d;">writer</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">script</span>.Invocable
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">invokeFunction</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">Object</span>... <span style="color: #a0522d;">parameters</span>);
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">invokeMethod</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">implicitParameter</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">Object</span>... <span style="color: #a0522d;">explicitParameters</span>);
&lt;<span style="color: #228b22;">T</span>&gt; T getInterface(<span style="color: #228b22;">Class</span>&lt;<span style="color: #228b22;">T</span>&gt; <span style="color: #a0522d;">iface</span>);
&lt;<span style="color: #228b22;">T</span>&gt; T getInterface(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">implicitParameter</span>, <span style="color: #228b22;">Class</span>&lt;<span style="color: #228b22;">T</span>&gt; <span style="color: #a0522d;">iface</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">script</span>.Compilable
<span style="color: #228b22;">CompiledScript</span> <span style="color: #0000ff;">compile</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">script</span>);
<span style="color: #228b22;">CompiledScript</span> <span style="color: #0000ff;">compile</span>(<span style="color: #228b22;">Reader</span> <span style="color: #a0522d;">reader</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">script</span>.CompiledScript
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">eval</span>();
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">eval</span>(<span style="color: #228b22;">Bindings</span> <span style="color: #a0522d;">bindings</span>);
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">tools</span>.Tool
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">run</span>(<span style="color: #228b22;">InputStream</span> <span style="color: #a0522d;">in</span>, <span style="color: #228b22;">OutputStream</span> <span style="color: #a0522d;">out</span>, <span style="color: #228b22;">OutputStream</span> <span style="color: #a0522d;">err</span>, <span style="color: #228b22;">String</span>... <span style="color: #a0522d;">args</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">tools</span>.JavaCompiler
<span style="color: #228b22;">StandardJavaFileManager</span> <span style="color: #0000ff;">getStandardFileManager</span>(<span style="color: #228b22;">DiagnosticListener</span>&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">JavaFileOpject</span>&gt; <span style="color: #a0522d;">diagnosticListener</span>, <span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">locale</span>, <span style="color: #228b22;">Charset</span> <span style="color: #a0522d;">charset</span>);
<span style="color: #008b8b;">JavaCompiler</span>.<span style="color: #228b22;">CompilationTask</span> <span style="color: #0000ff;">getTask</span>(<span style="color: #228b22;">Writer</span> <span style="color: #a0522d;">out</span>, <span style="color: #228b22;">JavaFileManager</span> <span style="color: #a0522d;">fileManager</span>, <span style="color: #228b22;">DiagnosticListener</span>&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">JavaFileObject</span>&gt; <span style="color: #a0522d;">diagnosticListener</span>, <span style="color: #228b22;">Iterable</span>&lt;<span style="color: #228b22;">String</span>&gt; <span style="color: #a0522d;">options</span>, <span style="color: #228b22;">Iterable</span>&lt;<span style="color: #228b22;">String</span>&gt; <span style="color: #a0522d;">classedForAnnotationProcessing</span>, <span style="color: #228b22;">Iterable</span>&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">JavaFileObject</span>&gt; <span style="color: #a0522d;">sourceFiles</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">tools</span>.StandardJavaFileManager
<span style="color: #228b22;">Iterable</span>&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">JavaFileObject</span>&gt; <span style="color: #0000ff;">getJavaFileObjectsFromStrings</span>(<span style="color: #228b22;">Iterable</span>&lt;<span style="color: #228b22;">String</span>&gt; <span style="color: #a0522d;">filenames</span>);
<span style="color: #228b22;">Iterable</span>&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">JavaFileObject</span>&gt; <span style="color: #0000ff;">getJavaFileObjectsFromFiles</span>(<span style="color: #228b22;">Iterable</span>&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">File</span>&gt; <span style="color: #a0522d;">files</span>);

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">tools</span>.<span style="color: #008b8b;">JavaCompiler</span>.CompilationTask
<span style="color: #228b22;">Boolean</span> <span style="color: #0000ff;">call</span>();

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">tools</span>.<span style="color: #228b22;">DiagnosticCollector</span>&lt;<span style="color: #228b22;">S</span>&gt;
<span style="color: #0000ff;">DiagnosticCollector</span>();
<span style="color: #228b22;">List</span>&lt;<span style="color: #228b22;">Diagnostic</span>&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">S</span>&gt;&gt; <span style="color: #0000ff;">getDiagnostics</span>();

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">tools</span>.<span style="color: #228b22;">Diagnostic</span>&lt;<span style="color: #228b22;">S</span>&gt;
<span style="color: #0000ff;">S</span> getSource();
<span style="color: #008b8b;">Diagnostic</span>.<span style="color: #228b22;">Kind</span> <span style="color: #0000ff;">getKind</span>();
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getMessage</span>(<span style="color: #228b22;">Locale</span> <span style="color: #a0522d;">locale</span>);
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">getLineNumber</span>();
<span style="color: #228b22;">long</span> <span style="color: #0000ff;">getColumnNumber</span>();

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">tools</span>.SimpleJavaFileObject
<span style="color: #228b22;">CharSequence</span> <span style="color: #0000ff;">getCharContent</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">ignoreEncodingErrors</span>);
<span style="color: #228b22;">OutputStream</span> <span style="color: #0000ff;">openOutputStream</span>();

<span style="color: #008b8b;">javax</span>.<span style="color: #008b8b;">tools</span>.<span style="color: #228b22;">ForwardingJavaFileManager</span>&lt;<span style="color: #228b22;">M</span> <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">JavaFileManager</span>&gt;
<span style="color: #a020f0;">protected</span> ForwardingJavaFileManager(<span style="color: #228b22;">M</span> <span style="color: #a0522d;">fileManager</span>);
<span style="color: #228b22;">FileObject</span> <span style="color: #0000ff;">getFileForOutput</span>(<span style="color: #008b8b;">JavaFileManager</span>.<span style="color: #228b22;">Location</span> <span style="color: #a0522d;">location</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">className</span>, <span style="color: #008b8b;">JavaFileObject</span>.<span style="color: #228b22;">Kind</span> <span style="color: #a0522d;">kind</span>, <span style="color: #228b22;">FileObject</span> <span style="color: #a0522d;">sibling</span>);
</pre>
</div>
</div>


<div id="outline-container-orgbd02c68" class="outline-3">
<h3 id="orgbd02c68">注解</h3>
<div class="outline-text-3" id="text-orgbd02c68">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.AnnotatedElement
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isAnnotationPresent</span>(<span style="color: #228b22;">Class</span>&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Annotation</span>&gt; <span style="color: #a0522d;">annotationType</span>);
&lt;<span style="color: #228b22;">T</span> <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Annotation</span>&gt; T getAnnotation(<span style="color: #228b22;">Class</span>&lt;<span style="color: #228b22;">T</span>&gt; <span style="color: #a0522d;">annotationType</span>);
<span style="color: #228b22;">Annotation</span>[] <span style="color: #0000ff;">getAnnotations</span>();
<span style="color: #228b22;">Annotation</span>[] <span style="color: #0000ff;">getDeclaredAnnotations</span>();
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">@interface</span> <span style="color: #228b22;">BugReport</span> {
    <span style="color: #228b22;">String</span> <span style="color: #0000ff;">assignedTo</span>() <span style="color: #a020f0;">default</span> <span style="color: #8b2252;">"[none]"</span>;
    <span style="color: #228b22;">int</span> <span style="color: #0000ff;">servrity</span>() = 0;
}
</pre>
</div>

<p>
如果注解只有一个参数，参数名可以省略：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">@interface</span> <span style="color: #228b22;">Foo</span> {
    <span style="color: #228b22;">String</span> <span style="color: #0000ff;">value</span>();
}

<span style="color: #008b8b;">@Foo</span>(<span style="color: #8b2252;">"abc"</span>);
</pre>
</div>

<p>
所有的注解接口都隐含继承自java.lang.annotation.Annotation。java中的常用注解有：
</p>

<p>
@Deprecated
@SuppressWarnings
@Override
@PostConstruct
@PreDestroy
@Resource
@Resources
@Generated
@Target
@Retention
@Documented
@Inherited
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2019-09-23 周一 21:12</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
